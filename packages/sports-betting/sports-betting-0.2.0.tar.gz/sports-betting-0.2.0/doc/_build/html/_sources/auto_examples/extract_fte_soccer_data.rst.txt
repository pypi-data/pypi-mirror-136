
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/extract_fte_soccer_data.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_extract_fte_soccer_data.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_extract_fte_soccer_data.py:


===========================
FiveThirtyEight soccer data
===========================

This example illustrates the usage of FiveThirtyEight soccer dataloader.

.. GENERATED FROM PYTHON SOURCE LINES 9-16

.. code-block:: default


    # Author: Georgios Douzas <gdouzas@icloud.com>
    # Licence: MIT

    import pandas as pd
    from sportsbet.datasets import FTESoccerDataLoader








.. GENERATED FROM PYTHON SOURCE LINES 17-19

Getting the available parameters
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 21-23

We can get the available parameters in order to select the training data
to be extracted, using the :meth:`get_all_params` class method.

.. GENERATED FROM PYTHON SOURCE LINES 23-26

.. code-block:: default


    params = FTESoccerDataLoader.get_all_params()








.. GENERATED FROM PYTHON SOURCE LINES 27-28

The available parameters can be presented as a DataFrame.

.. GENERATED FROM PYTHON SOURCE LINES 28-34

.. code-block:: default


    params_df = pd.DataFrame(params).sort_values(
        ['league', 'year', 'division'], ignore_index=True
    )
    params_df






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>division</th>
          <th>league</th>
          <th>year</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2018</td>
        </tr>
        <tr>
          <th>1</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>2</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2020</td>
        </tr>
        <tr>
          <th>3</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2022</td>
        </tr>
        <tr>
          <th>4</th>
          <td>1</td>
          <td>Australia</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>174</th>
          <td>1</td>
          <td>USA</td>
          <td>2022</td>
        </tr>
        <tr>
          <th>175</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>176</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2020</td>
        </tr>
        <tr>
          <th>177</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2021</td>
        </tr>
        <tr>
          <th>178</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2022</td>
        </tr>
      </tbody>
    </table>
    <p>179 rows × 3 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 35-37

We select to extract training data only for the year 2021 of all the
divisions of English league.

.. GENERATED FROM PYTHON SOURCE LINES 37-40

.. code-block:: default


    param_grid = {'league': ['England'], 'year': [2021]}








.. GENERATED FROM PYTHON SOURCE LINES 41-43

Getting the available odds types
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 45-47

We can get the available odds types in order to match the output of the
training data, using the :meth:`get_odds_types` class method.

.. GENERATED FROM PYTHON SOURCE LINES 47-50

.. code-block:: default


    FTESoccerDataLoader.get_odds_types()





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    []



.. GENERATED FROM PYTHON SOURCE LINES 51-52

Therefore no odds data are available.

.. GENERATED FROM PYTHON SOURCE LINES 54-56

Extracting the training data
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 58-60

We extract the training data using the default values for the parameters
`odds_type` and `drop_na_thres`.

.. GENERATED FROM PYTHON SOURCE LINES 60-64

.. code-block:: default


    dataloader = FTESoccerDataLoader(param_grid=param_grid)
    X_train, Y_train, _ = dataloader.extract_train_data()








.. GENERATED FROM PYTHON SOURCE LINES 65-66

The input data:

.. GENERATED FROM PYTHON SOURCE LINES 66-68

.. code-block:: default

    X_train






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>league</th>
          <th>home_team</th>
          <th>away_team</th>
          <th>home_team_soccer_power_index</th>
          <th>away_team_soccer_power_index</th>
          <th>home_team_probability_win</th>
          <th>away_team_probability_win</th>
          <th>probability_draw</th>
          <th>home_team_projected_score</th>
          <th>away_team_projected_score</th>
          <th>home_team_match_importance</th>
          <th>away_team_match_importance</th>
          <th>division</th>
          <th>year</th>
          <th>match_quality</th>
        </tr>
        <tr>
          <th>date</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>2020-09-11</th>
          <td>England</td>
          <td>Watford</td>
          <td>Middlesbrough</td>
          <td>65.12</td>
          <td>46.31</td>
          <td>0.6387</td>
          <td>0.1423</td>
          <td>0.2190</td>
          <td>2.06</td>
          <td>0.85</td>
          <td>53.0</td>
          <td>16.5</td>
          <td>2</td>
          <td>2021</td>
          <td>54.127384</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Oldham Athletic</td>
          <td>Leyton Orient</td>
          <td>18.46</td>
          <td>12.80</td>
          <td>0.5072</td>
          <td>0.2612</td>
          <td>0.2317</td>
          <td>1.90</td>
          <td>1.31</td>
          <td>40.7</td>
          <td>23.6</td>
          <td>4</td>
          <td>2021</td>
          <td>15.117594</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Salford City</td>
          <td>Exeter City</td>
          <td>23.97</td>
          <td>15.12</td>
          <td>0.5480</td>
          <td>0.2178</td>
          <td>0.2342</td>
          <td>1.86</td>
          <td>1.09</td>
          <td>61.4</td>
          <td>39.4</td>
          <td>4</td>
          <td>2021</td>
          <td>18.543177</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Barrow</td>
          <td>Stevenage</td>
          <td>11.43</td>
          <td>7.54</td>
          <td>0.4562</td>
          <td>0.2750</td>
          <td>0.2689</td>
          <td>1.48</td>
          <td>1.08</td>
          <td>19.1</td>
          <td>20.6</td>
          <td>4</td>
          <td>2021</td>
          <td>9.086157</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Port Vale</td>
          <td>Crawley Town</td>
          <td>11.37</td>
          <td>12.36</td>
          <td>0.3885</td>
          <td>0.3404</td>
          <td>0.2711</td>
          <td>1.36</td>
          <td>1.26</td>
          <td>24.0</td>
          <td>26.0</td>
          <td>4</td>
          <td>2021</td>
          <td>11.844349</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>2021-05-23</th>
          <td>England</td>
          <td>Wolverhampton</td>
          <td>Manchester United</td>
          <td>69.50</td>
          <td>85.69</td>
          <td>0.2910</td>
          <td>0.4464</td>
          <td>0.2627</td>
          <td>1.16</td>
          <td>1.50</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>1</td>
          <td>2021</td>
          <td>76.750499</td>
        </tr>
        <tr>
          <th>2021-05-23</th>
          <td>England</td>
          <td>Morecambe</td>
          <td>Tranmere Rovers</td>
          <td>18.07</td>
          <td>10.76</td>
          <td>0.4706</td>
          <td>0.2586</td>
          <td>0.2708</td>
          <td>1.47</td>
          <td>1.02</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>4</td>
          <td>2021</td>
          <td>13.488255</td>
        </tr>
        <tr>
          <th>2021-05-29</th>
          <td>England</td>
          <td>Brentford</td>
          <td>Swansea City</td>
          <td>66.87</td>
          <td>47.28</td>
          <td>0.7221</td>
          <td>0.2779</td>
          <td>0.0000</td>
          <td>1.58</td>
          <td>0.79</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>2</td>
          <td>2021</td>
          <td>55.394018</td>
        </tr>
        <tr>
          <th>2021-05-30</th>
          <td>England</td>
          <td>Blackpool</td>
          <td>Lincoln City</td>
          <td>35.10</td>
          <td>28.07</td>
          <td>0.6188</td>
          <td>0.3812</td>
          <td>0.0000</td>
          <td>1.35</td>
          <td>0.94</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>3</td>
          <td>2021</td>
          <td>31.193826</td>
        </tr>
        <tr>
          <th>2021-05-31</th>
          <td>England</td>
          <td>Morecambe</td>
          <td>Newport County</td>
          <td>17.71</td>
          <td>12.81</td>
          <td>0.5309</td>
          <td>0.4691</td>
          <td>0.0000</td>
          <td>1.23</td>
          <td>1.13</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>4</td>
          <td>2021</td>
          <td>14.866651</td>
        </tr>
      </tbody>
    </table>
    <p>2051 rows × 15 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 69-70

The targets:

.. GENERATED FROM PYTHON SOURCE LINES 70-72

.. code-block:: default

    Y_train






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>away_win__full_time_goals</th>
          <th>draw__full_time_goals</th>
          <th>home_win__full_time_goals</th>
          <th>over_1.5__full_time_goals</th>
          <th>over_2.5__full_time_goals</th>
          <th>over_3.5__full_time_goals</th>
          <th>over_4.5__full_time_goals</th>
          <th>under_1.5__full_time_goals</th>
          <th>under_2.5__full_time_goals</th>
          <th>under_3.5__full_time_goals</th>
          <th>under_4.5__full_time_goals</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>1</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2</th>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
        </tr>
        <tr>
          <th>3</th>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>4</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>2046</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2047</th>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2048</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2049</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2050</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
      </tbody>
    </table>
    <p>2051 rows × 11 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 73-75

Extracting the fixtures data
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 77-80

We extract the fixtures data with columns that match the columns of the
training data. On the other hand, the fixtures data are not affected by
the `param_grid` selection.

.. GENERATED FROM PYTHON SOURCE LINES 80-83

.. code-block:: default


    X_fix, *_ = dataloader.extract_fixtures_data()








.. GENERATED FROM PYTHON SOURCE LINES 84-85

The input data:

.. GENERATED FROM PYTHON SOURCE LINES 85-86

.. code-block:: default

    X_fix





.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>league</th>
          <th>home_team</th>
          <th>away_team</th>
          <th>home_team_soccer_power_index</th>
          <th>away_team_soccer_power_index</th>
          <th>home_team_probability_win</th>
          <th>away_team_probability_win</th>
          <th>probability_draw</th>
          <th>home_team_projected_score</th>
          <th>away_team_projected_score</th>
          <th>home_team_match_importance</th>
          <th>away_team_match_importance</th>
          <th>division</th>
          <th>year</th>
          <th>match_quality</th>
        </tr>
        <tr>
          <th>date</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>2022-01-26</th>
          <td>Belgium</td>
          <td>Anderlecht</td>
          <td>Cercle Brugge</td>
          <td>59.47</td>
          <td>43.24</td>
          <td>0.6332</td>
          <td>0.1502</td>
          <td>0.2166</td>
          <td>1.94</td>
          <td>0.82</td>
          <td>57.4</td>
          <td>2.6</td>
          <td>1</td>
          <td>2022</td>
          <td>50.072686</td>
        </tr>
        <tr>
          <th>2022-01-26</th>
          <td>Belgium</td>
          <td>RFC Seraing</td>
          <td>KFCO Beerschot-Wilrijk</td>
          <td>23.62</td>
          <td>26.52</td>
          <td>0.3999</td>
          <td>0.3381</td>
          <td>0.2620</td>
          <td>1.42</td>
          <td>1.29</td>
          <td>54.1</td>
          <td>42.0</td>
          <td>1</td>
          <td>2022</td>
          <td>24.986135</td>
        </tr>
        <tr>
          <th>2022-01-26</th>
          <td>Scotland</td>
          <td>Hearts</td>
          <td>Celtic</td>
          <td>42.55</td>
          <td>65.23</td>
          <td>0.1885</td>
          <td>0.5805</td>
          <td>0.2310</td>
          <td>0.93</td>
          <td>1.81</td>
          <td>17.5</td>
          <td>56.6</td>
          <td>1</td>
          <td>2022</td>
          <td>51.503739</td>
        </tr>
        <tr>
          <th>2022-01-26</th>
          <td>Scotland</td>
          <td>Motherwell</td>
          <td>Hibernian</td>
          <td>34.75</td>
          <td>38.96</td>
          <td>0.3566</td>
          <td>0.3590</td>
          <td>0.2844</td>
          <td>1.17</td>
          <td>1.17</td>
          <td>1.5</td>
          <td>1.2</td>
          <td>1</td>
          <td>2022</td>
          <td>36.734771</td>
        </tr>
        <tr>
          <th>2022-01-26</th>
          <td>Scotland</td>
          <td>Rangers</td>
          <td>Livingston</td>
          <td>66.73</td>
          <td>32.39</td>
          <td>0.7946</td>
          <td>0.0481</td>
          <td>0.1573</td>
          <td>2.16</td>
          <td>0.35</td>
          <td>76.5</td>
          <td>11.2</td>
          <td>1</td>
          <td>2022</td>
          <td>43.611475</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Sporting GijÃ³n</td>
          <td>Las Palmas</td>
          <td>27.67</td>
          <td>34.45</td>
          <td>0.3403</td>
          <td>0.3584</td>
          <td>0.3013</td>
          <td>1.17</td>
          <td>1.21</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>30.690003</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Mirandes</td>
          <td>Fuenlabrada</td>
          <td>28.39</td>
          <td>24.68</td>
          <td>0.4453</td>
          <td>0.2584</td>
          <td>0.2963</td>
          <td>1.37</td>
          <td>0.97</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>26.405321</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Real Oviedo</td>
          <td>UD Ibiza</td>
          <td>33.67</td>
          <td>31.70</td>
          <td>0.4426</td>
          <td>0.2637</td>
          <td>0.2937</td>
          <td>1.39</td>
          <td>1.00</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>32.655316</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Lugo</td>
          <td>MÃ¡laga</td>
          <td>30.51</td>
          <td>25.64</td>
          <td>0.4657</td>
          <td>0.2496</td>
          <td>0.2847</td>
          <td>1.47</td>
          <td>1.00</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>27.863808</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Real Valladolid</td>
          <td>SD Huesca</td>
          <td>45.18</td>
          <td>33.19</td>
          <td>0.5291</td>
          <td>0.2027</td>
          <td>0.2682</td>
          <td>1.63</td>
          <td>0.91</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>38.267812</td>
        </tr>
      </tbody>
    </table>
    <p>3413 rows × 15 columns</p>
    </div>
    </div>
    <br />
    <br />


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  12.774 seconds)


.. _sphx_glr_download_auto_examples_extract_fte_soccer_data.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: extract_fte_soccer_data.py <extract_fte_soccer_data.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: extract_fte_soccer_data.ipynb <extract_fte_soccer_data.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
