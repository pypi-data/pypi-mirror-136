/* Generated by Nim Compiler v1.4.4 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <windows.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;

/* section: NIM_merge_TYPES */
struct TGenericSeq {
NI len;
NI reserved;
};
struct NimStringDesc {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef N_STDCALL_PTR(NI, tyProc__KeCiSdV9aG0JRdXpLIxCQ9cQ) (void* lpEventAttributes, NI32 bManualReset, NI32 bInitialState, NCSTRING lpName);
typedef NU8 tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void, tyProc__ojoeKfW4VYIm36I9cpDTQIg) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ) (void* p);
struct TNimType {
NI size;
NI align;
tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc__ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;
};
typedef N_STDCALL_PTR(void, tyProc__ofoySXaAAlxxs9bQS9a1etlg) (NI hEvent);
typedef N_STDCALL_PTR(NI32, tyProc__FprzxJFfqQdWyyGxiUsmeQ) (NI hHandle, NI32 dwMilliseconds);
typedef NU8 tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ;
struct TNimNode {
tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};

/* section: NIM_merge_PROC_HEADERS */
N_LIB_PRIVATE N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* path);
N_LIB_PRIVATE N_NIMCALL(void, nimLoadLibraryError)(NimStringDesc* path);
N_LIB_PRIVATE N_NIMCALL(void*, nimGetProcAddr)(void* lib, NCSTRING name);
static N_INLINE(NIM_BOOL, tryAcquireSys__BnaZGbQzpILVP0MAjO0f3Qlocks)(CRITICAL_SECTION* L);

/* section: NIM_merge_DATA */
STRING_LITERAL(TM__05xOtLU9bCAYnon4m09bcBlg_4, "kernel32", 8);
STRING_LITERAL(TM__05xOtLU9bCAYnon4m09bcBlg_5, "kernel32", 8);
N_LIB_PRIVATE TNimType NTI__lsB6JckQ3csMuiRW476VWg_;

/* section: NIM_merge_VARS */
static void* TM__05xOtLU9bCAYnon4m09bcBlg_2;
tyProc__KeCiSdV9aG0JRdXpLIxCQ9cQ Dl_3100026_;
tyProc__ofoySXaAAlxxs9bQS9a1etlg Dl_3100039_;
tyProc__FprzxJFfqQdWyyGxiUsmeQ Dl_3100035_;
tyProc__ofoySXaAAlxxs9bQS9a1etlg Dl_3100032_;

/* section: NIM_merge_PROCS */
N_LIB_PRIVATE N_NIMCALL(void, acquire__2gdcVC9bfoOlGMK1NSM2nLQ)(CRITICAL_SECTION* lock) {
	EnterCriticalSection(lock);
}
N_LIB_PRIVATE N_NIMCALL(void, release__2gdcVC9bfoOlGMK1NSM2nLQ_2)(CRITICAL_SECTION* lock) {
	LeaveCriticalSection(lock);
}
N_LIB_PRIVATE N_NIMCALL(void, waitSysCond__yt0qxCLgFmSktbZNtXIybQ)(NI* cond, CRITICAL_SECTION* lock) {
	NI32 T1_;
	LeaveCriticalSection(lock);
	T1_ = (NI32)0;
	T1_ = Dl_3100035_((*cond), ((NI32) -1));
	(void)(T1_);
	EnterCriticalSection(lock);
}
static N_INLINE(NIM_BOOL, tryAcquireSys__BnaZGbQzpILVP0MAjO0f3Qlocks)(CRITICAL_SECTION* L) {
	NIM_BOOL result;
	NI32 T1_;
	result = (NIM_BOOL)0;
	T1_ = (NI32)0;
	T1_ = TryEnterCriticalSection(L);
	result = !((T1_ == ((NI32) 0)));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, tryAcquire__WC5DSRWH9bwv9asm9bZP5EWIw)(CRITICAL_SECTION* lock) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	result = tryAcquireSys__BnaZGbQzpILVP0MAjO0f3Qlocks(lock);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, stdlib_locksDatInit000)(void) {

/* section: NIM_merge_TYPE_INIT1 */
static TNimNode TM__05xOtLU9bCAYnon4m09bcBlg_0[1];

/* section: NIM_merge_TYPE_INIT3 */
NTI__lsB6JckQ3csMuiRW476VWg_.size = sizeof(CRITICAL_SECTION);
NTI__lsB6JckQ3csMuiRW476VWg_.align = NIM_ALIGNOF(CRITICAL_SECTION);
NTI__lsB6JckQ3csMuiRW476VWg_.kind = 18;
NTI__lsB6JckQ3csMuiRW476VWg_.base = 0;
NTI__lsB6JckQ3csMuiRW476VWg_.flags = 3;
NTI__lsB6JckQ3csMuiRW476VWg_.node = &TM__05xOtLU9bCAYnon4m09bcBlg_0[0];

/* section: NIM_merge_DYNLIB_INIT */
if (!((TM__05xOtLU9bCAYnon4m09bcBlg_2 = nimLoadLibrary(((NimStringDesc*) &TM__05xOtLU9bCAYnon4m09bcBlg_4)))
)) nimLoadLibraryError(((NimStringDesc*) &TM__05xOtLU9bCAYnon4m09bcBlg_5));
	Dl_3100026_ = (tyProc__KeCiSdV9aG0JRdXpLIxCQ9cQ) nimGetProcAddr(TM__05xOtLU9bCAYnon4m09bcBlg_2, "CreateEventA");
	Dl_3100039_ = (tyProc__ofoySXaAAlxxs9bQS9a1etlg) nimGetProcAddr(TM__05xOtLU9bCAYnon4m09bcBlg_2, "SetEvent");
	Dl_3100035_ = (tyProc__FprzxJFfqQdWyyGxiUsmeQ) nimGetProcAddr(TM__05xOtLU9bCAYnon4m09bcBlg_2, "WaitForSingleObject");
	Dl_3100032_ = (tyProc__ofoySXaAAlxxs9bQS9a1etlg) nimGetProcAddr(TM__05xOtLU9bCAYnon4m09bcBlg_2, "CloseHandle");
}

