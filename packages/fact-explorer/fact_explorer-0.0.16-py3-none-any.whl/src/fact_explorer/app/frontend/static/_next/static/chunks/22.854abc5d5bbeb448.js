"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{1815:function(e,n,r){r.d(n,{Y:function(){return t}});var t={}},7022:function(e,n,r){r.r(n);var t=r(5666),o=r.n(t),a=r(9604),i=r(7673),c=r(1815);function u(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s="",l=[];function f(e){var n="fact-explorer.focusAggId",r="fact-explorer.mergeAggId";e.editor.registerCommand(n,(function(e,r){var t;c.Y.onFocusAggId?null===(t=c.Y.onFocusAggId)||void 0===t||t.call(c.Y,r.aggId):alert('Command "'.concat(n,'" is not handled correctly.'))})),e.editor.registerCommand(r,(function(e,r){var t;c.Y.onMergeAggId?null===(t=c.Y.onMergeAggId)||void 0===t||t.call(c.Y,r.aggId):alert('Command "'.concat(n,'" is not handled correctly.'))})),e.languages.registerHoverProvider("json",{provideHover:function(t,o){if("/result/search.json"===t.uri.path){var a="".concat(t.id,"-").concat(t.getVersionId());if(a!==s){var c=(0,i.Qc)(t.getValue()),f=[],v=!0,p=!1,d=void 0;try{for(var m,h=(0,i.hZ)(c,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(v=(m=h.next()).done);v=!0){var y=m.value,g=y.node;y.parent,y.phase;if("Member"===g.type&&"aggIds"===g.name.value&&"Array"===g.value.type){var b,w=g.value.elements.filter((function(e){return"String"===e.type}));(b=f).push.apply(b,u(w))}}}catch(k){p=!0,d=k}finally{try{v||null==h.return||h.return()}finally{if(p)throw d}}s=a,l=f}var x=l.find((function(e){return e.loc.start.line===o.lineNumber&&e.loc.end.line===o.lineNumber&&e.loc.start.column<=o.column&&e.loc.end.column>=o.column}));if(!x)return null;var j=encodeURIComponent(JSON.stringify({aggId:x.value}));return{range:new e.Range(x.loc.start.line,x.loc.start.column,x.loc.end.line,x.loc.end.column),contents:[{value:"[".concat("Focus","](command:").concat(n,"?").concat(j,' "').concat("Filter for this specific aggId.",'") | [').concat("Add to current filter","](command:").concat(r,"?").concat(j,' "').concat("Adds this specific aggId to the current filter.",'")'),isTrusted:!0}]}}}})}function v(e,n,r,t,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void r(s)}c.done?n(u):Promise.resolve(u).then(t,o)}function p(e){var n;fetch("/api/registry/namespaces?with-types=true").then((n=o().mark((function n(r){var t,a,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.ok){n.next=4;break}return n.next=3,r.json();case 3:throw n.sent;case 4:return n.next=6,r.json();case 6:t=n.sent,a=Object.keys(t),i=[],a.forEach((function(e){var n=t[e];n.types.forEach((function(r){i.push({type:"object",properties:{ns:{description:n.title,enum:[e]},type:{enum:[r.name]},version:{enum:[r.version]}}})}))})),e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,trailingCommas:"ignore",allowComments:!0,schemas:[{uri:"http://fact-explorer/header-schema.json",fileMatch:["header.json"],schema:{type:"object",properties:{id:{type:"string"},aggIds:{type:"array",items:{type:"string"}},ns:{enum:a},type:{type:"string"},version:{type:"integer"}},anyOf:i}}]});case 11:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var a=n.apply(e,r);function i(e){v(a,t,o,i,c,"next",e)}function c(e){v(a,t,o,i,c,"throw",e)}i(void 0)}))})).catch((function(e){console.error("Could not fetch namespaces with types from registry."),console.error(e)}))}function d(e,n,r,t,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void r(s)}c.done?n(u):Promise.resolve(u).then(t,o)}function m(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){d(a,t,o,i,c,"next",e)}function c(e){d(a,t,o,i,c,"throw",e)}i(void 0)}))}}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(u){o=!0,a=u}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y="",g=[],b={};function w(e){e.languages.registerHoverProvider("json",{provideHover:function(n,r){if(n.uri.path.startsWith("/result/")){var t="".concat(n.id,"-").concat(n.getVersionId());if(t!==y){var o=(0,i.Qc)(n.getValue()),a=[],c=!0,u=!1,s=void 0;try{for(var l,f=(0,i.hZ)(o,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var v=l.value,p=v.node;v.parent,v.phase;if("Object"===p.type&&2===p.members.length&&"header"===p.members[0].name.value&&"payload"===p.members[1].name.value){var d=h(p.members,2),m=d[0],b=d[1],w=m.value.members.find((function(e){return"ns"===e.name.value})).value.value,j=m.value.members.find((function(e){return"type"===e.name.value})).value.value,k=m.value.members.find((function(e){return"version"===e.name.value})).value.value;a.push({node:b,ns:w,type:j,version:k})}}}catch(I){u=!0,s=I}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}y=t,g=a}var O=g.find((function(e){var n=e.node;return(n.loc.start.line<r.lineNumber||n.loc.start.line===r.lineNumber&&n.loc.start.column<=r.column)&&(n.loc.end.line>r.lineNumber||n.loc.end.line===r.lineNumber&&n.loc.end.column>=r.column)}));return O?function(e){return x.apply(this,arguments)}(O).then((function(n){return{range:new e.Range(r.lineNumber,r.column,r.lineNumber,r.column),contents:[{value:n,isTrusted:!0}]}})).catch((function(e){return console.error("Could not fetch schema from registry."),console.error(e),null})):null}}})}function x(){return(x=m(o().mark((function e(n){var r,t,a,i,c,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.ns,t=n.type,a=n.version,i="namespace=".concat(r,"&type=").concat(t,"&version=").concat(a),!b[i]){e.next=4;break}return e.abrupt("return",b[i]);case 4:return e.next=6,fetch("/api/registry/schema?namespace=".concat(r,"&type=").concat(t,"&version=").concat(a));case 6:if((c=e.sent).ok){e.next=11;break}return e.next=10,c.json();case 10:throw e.sent;case 11:return e.next=13,c.json();case 13:function o(e,n){var r=void 0===n?0:n;0===r&&e.title&&(s+=e.title+"\n\n");var t=e.properties||e.items.properties;t&&Object.keys(t).forEach((function(n){var a,i,c=t[n],u=null===(a=e.required)||void 0===a?void 0:a.find((function(e){return e===n}));s+=(0!==r?" ".repeat(2*r)+"- ":"- ")+"**"+n+"**"+(u?" _(required)_":"")+": `{".concat(c.type,"}` ").concat(null!==(i=c.title)&&void 0!==i?i:"_no description_","\n\n"),"object"===c.type&&o(c,r+1),"array"===c.type&&o(c,r+1)}))}return u=e.sent,s="",o(u),b[i]=s,e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=r(7563);function k(e,n,r,t,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void r(s)}c.done?n(u):Promise.resolve(u).then(t,o)}function O(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){k(a,t,o,i,c,"next",e)}function c(e){k(a,t,o,i,c,"throw",e)}i(void 0)}))}}function I(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){I(e,n,r[n])}))}return e}function A(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var C="",S=[],E={};function N(e,n){e.languages.registerCodeLensProvider("json",{provideCodeLenses:function(r,t){return O(o().mark((function t(){var a,c,u,s,l,f,v,p,d,m,h,y;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.uri.path.startsWith("/result/")){t.next=2;break}return t.abrupt("return");case 2:if((a="".concat(r.id,"-").concat(r.getVersionId()))===C){t.next=25;break}for(c=(0,i.Qc)(r.getValue()),u=[],s=!0,l=!1,f=void 0,t.prev=7,v=(0,i.hZ)(c,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(s=(p=v.next()).done);s=!0)d=p.value,m=d.node,h=d.parent,d.phase,n.forEach((function(e){if("String"===m.type&&e.fields.some((function(e){return"string"===typeof e?e===m.value:m.value.match(e)}))&&"Member"===h.type&&"String"===h.value.type){var n=h.value.value;u.push({node:m,id:n,config:e})}}));t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),l=!0,f=t.t0;case 15:t.prev=15,t.prev=16,s||null==v.return||v.return();case 18:if(t.prev=18,!l){t.next=21;break}throw f;case 21:return t.finish(18);case 22:return t.finish(15);case 23:C=a,S=u;case 25:return t.next=27,Promise.all(S.map(O(o().mark((function n(r){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(r.id,r.config);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return",null);case 5:return n.abrupt("return",{range:new e.Range(r.node.loc.start.line,r.node.loc.start.column,r.node.loc.end.line,r.node.loc.end.column),command:{id:"",title:t}});case 6:case"end":return n.stop()}}),n)})))));case 27:return y=t.sent.filter((function(e){return!!e})),t.abrupt("return",{lenses:y,dispose:function(){}});case 29:case"end":return t.stop()}}),t,null,[[7,11,15,23],[16,,18,22]])})))()}})}function _(e,n){return L.apply(this,arguments)}function L(){return(L=O(o().mark((function e(n,r){var t,a,i,c,u,s,l,f,v,p,d,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E[n]){e.next=2;break}return e.abrupt("return",E[n]);case 2:t=!0,a=!1,i=void 0,e.prev=3,c=r.events[Symbol.iterator]();case 5:if(t=(u=c.next()).done){e.next=27;break}return s=u.value,(l=s).value,f=A(l,["value"]),v=j.stringify({hq:JSON.stringify(P({},f,{aggIds:[n]})),pq:JSON.stringify({}),skip:0,limit:1,decrypt:!0}),e.next=12,fetch("/api/search?".concat(v));case 12:if((p=e.sent).ok){e.next=17;break}return e.next=16,p.json();case 16:throw e.sent;case 17:return e.next=19,p.json();case 19:if(!(d=e.sent).length){e.next=24;break}return m=l.value(d[0].payload),E[n]=m,e.abrupt("return",m);case 24:t=!0,e.next=5;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(3),a=!0,i=e.t0;case 33:e.prev=33,e.prev=34,t||null==c.return||c.return();case 36:if(e.prev=36,!a){e.next=39;break}throw i;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return e.abrupt("return",null);case 42:case"end":return e.stop()}}),e,null,[[3,29,33,41],[34,,36,40]])})))).apply(this,arguments)}var R,F=r(3186),V="",Y=[];function M(e){e.languages.registerCodeLensProvider("json",{provideCodeLenses:function(n,r){if(n.uri.path.startsWith("/result/")){var t="".concat(n.id,"-").concat(n.getVersionId());if(t!==V){var o=(0,i.Qc)(n.getValue()),a=[],c=!0,u=!1,s=void 0;try{for(var l,f=(0,i.hZ)(o,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var v=l.value,p=v.node;v.parent,v.phase;"Member"===p.type&&"_ts"===p.name.value&&"Number"===p.value.type&&a.push({node:p,title:(0,F.Z)(p.value.value)})}}catch(d){u=!0,s=d}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}V=t,Y=a}return{lenses:Y.map((function(n){return{range:new e.Range(n.node.loc.start.line,n.node.loc.start.column,n.node.loc.end.line,n.node.loc.end.column),command:{id:"",title:n.title}}})),dispose:function(){}}}},resolveCodeLens:function(e,n,r){return n}})}function T(e,n,r,t,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void r(s)}c.done?n(u):Promise.resolve(u).then(t,o)}a._m.init().then((R=o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(n),M(n),f(n),w(n),window.FACT_EXPLORER.eventFieldLens&&N(n,window.FACT_EXPLORER.eventFieldLens);case 5:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,t){var o=R.apply(e,n);function a(e){T(o,r,t,a,i,"next",e)}function i(e){T(o,r,t,a,i,"throw",e)}a(void 0)}))}))}}]);