(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[5677],{40636:e=>{e.exports="data:image/svg+xml,%3csvg width='16' height='16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='%23F5F5F6' d='M0 0h8v8H0zM8 8h8v8H8z'/%3e%3cpath fill='%23fff' d='M8 0h8v8H8zM0 8h8v8H0z'/%3e%3c/svg%3e"},41740:e=>{e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 91.1 295.357 437.8' width='1051.841' height='1272.088'%3e%3cpath d='M300.178 168.5v282.2l-90.1-20.6v-241z' fill='%238c3123'/%3e%3cpath d='M328.678 182v257.6l-28.5 11.1V168.5zm-180.2-90.9l65.6 33.9v370l-65.6 33.9z' fill='%23e05243'/%3e%3cpath d='M-33.322 185.1l29.2-17.4v284.6l-29.2-14.3z' fill='%238c3123'/%3e%3cpath d='M33.878 176.4l52.1 12.7v241.8l-90.1 21.4V167.7z' fill='%23e05243'/%3e%3cpath d='M82.078 125v370.7l66.4 33.2V91.1z' fill='%238c3123'/%3e%3c/svg%3e"},23307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(70655),i=n(94184),o=n.n(i),s=n(67294),a=n(41120),u=n(10529),c=n(59693),l=a.Z((function(e){return{root:{background:e.palette.action.hover},"@keyframes wave":{"0%":{backgroundPosition:"-200px 0"},"100%":{backgroundPosition:"calc(200px + 100%) 0"}},animate:{animation:"$wave 3s infinite",backgroundImage:"linear-gradient(\n      90deg,\n      "+(0,c.U1)(e.palette.common.white,0)+",\n      "+(0,c.U1)(e.palette.common.white,.7)+",\n      "+(0,c.U1)(e.palette.common.white,0)+"\n    )",backgroundRepeat:"no-repeat",backgroundSize:"200px 100%"}}}));const f=s.forwardRef((function(e,t){var n=e.className,i=e.animate,a=void 0===i||i,c=(0,r._T)(e,["className","animate"]),f=l();return s.createElement(u.Z,(0,r.pi)({className:o()(n,f.root,a&&f.animate)},c,{ref:t}))}))},45677:(e,t,n)=>{"use strict";n.d(t,{NB:()=>xe,wY:()=>le,qR:()=>je,rx:()=>We,$S:()=>Oe,dY:()=>ve,Aw:()=>_e,Wf:()=>Je,rh:()=>Ee,sS:()=>Me,dc:()=>ge,cY:()=>Se,UG:()=>qe,ec:()=>ye,WP:()=>De,YQ:()=>Ne,d_:()=>rt,Xt:()=>Pe,Iz:()=>Ce,PC:()=>Qe,D6:()=>ct,BX:()=>ut,aY:()=>lt,F:()=>ft,sq:()=>ke});var r=n(70655),i=n(26470),o=n(32370),s=n(90584),a=n(3735),u=n(3773),c=n.n(u),l=n(24358),f=n(40043),d=n(68981),p=n(25991),v=n(84792),m=n(45077),h=n(30601),g=n(70475),y=n(97716),k=n(25078),b=n(49925),Z=n(20127),w=n(12338),x=n(19344),S=n(43880),E=n(3227),_=n(23723),O=n(61920),j=n(15288),P=n(10151),N=n(45136),z=n(82329),B=n(67826),C=n(49875),$=n(29969),I=n(94373),J=n(21669),R=n(85477),G=n(20115),q=n(58789),T=n(18865),A=n(19218),U=n(24402),D=n(70948),M=n(67432),V=n(917),K=n(86200),L=n(62825),H=n(64457),W=n(59211),Q=n(84734),F=n(80891);const Y=JSON.parse('{"definitions":{"fileShortcut":{"type":"string","description":"Path relative to quilt_summarize.json","examples":["file1.json"]},"fileExtended":{"type":"object","properties":{"path":{"$ref":"#/definitions/fileShortcut"},"description":{"type":"string"},"title":{"type":"string"},"types":{"type":"array","items":{"oneOf":[{"$ref":"#/definitions/typeShorthand"},{"$ref":"#/definitions/typeExtended"}]}},"width":{"$ref":"#/definitions/width"}},"required":["path"]},"typeShorthand":{"type":"string","enum":["echarts","json","jupyter","vega","voila"]},"typeExtended":{"type":"object","properties":{"name":{"$ref":"#/definitions/typeShorthand"},"style":{"type":"object","properties":{"height":{"description":"Height as an absolute value (in `px`, `vh`, `em` etc.)","examples":["1000px","500vh"],"type":"string"}}}},"required":["name"]},"file":{"oneOf":[{"$ref":"#/definitions/fileShortcut"},{"$ref":"#/definitions/fileExtended"}]},"width":{"anyOf":[{"description":"Ratio number for flex-based width","examples":[1.5],"type":"number"},{"description":"Width in pixels or percents","examples":["100px"],"type":"string"}]},"row":{"anyOf":[{"$ref":"#/definitions/file"},{"type":"array","items":{"$ref":"#/definitions/file"}}]}},"type":"array","items":{"$ref":"#/definitions/row"}}');var X=n(51379),ee=n(42049),te=n(99761),ne=n(57996),re=n(3920),ie=n(36473),oe=n(61542),se=n(89584),ae=n(73206),ue=n(26598),ce=x.Z(ue.Z(/\+/g," "),decodeURIComponent),le=function(e){var t=e.s3,n=e.analyticsBucket,i=e.bucket,u=e.today,c=e.window;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,l,_;return(0,r.Jh)(this,(function(O){switch(O.label){case 0:if(!n)throw new Error('bucketAccessCounts: "analyticsBucket" required');e=f.Z((function(e){return e>=0&&[o.Z(u,e),e-1]}),c),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,Te({s3:t,Bucket:n,Key:Ue+"/Exts.csv",Expression:"\n        SELECT ext, counts FROM s3object\n        WHERE eventname = 'GetObject'\n        AND bucket = '"+Ae(i)+"'\n      ",InputSerialization:{CSV:{FileHeaderInfo:"Use",AllowQuotedRecordDelimiter:!0}}})];case 2:return l=O.sent(),[2,a.zG(l,d.Z((function(t){var n=JSON.parse(t.counts),r=e.reduce((function(e,t){var r=n[s.Z(t,"yyyy-MM-dd")]||0,i=e.total+r;return{total:i,counts:e.counts.concat({date:t,value:r,sum:i})}}),{total:0,counts:[]}),i=r.counts,o=r.total;return{ext:t.ext&&"."+t.ext,total:o,counts:i}})),p.Z((function(e){return e.total})),v.Z(m.Z(h.Z("total"))),g.Z({byExt:y.Z,byExtCollapsed:function(e){if(e.length<=10)return e;var t=k.Z((function(e){return""===e.ext}),e),n=t[0],i=t[1],o=b.Z(9,i),s=o[0],a=o[1],u=(0,r.ev)((0,r.ev)([],n,!0),a,!0).reduce((function(e,t){return{ext:"",total:e.total+t.total,counts:Z.Z((function(e,t){return{date:e.date,value:e.value+t.value,sum:e.sum+t.sum}}),e.counts,t.counts)}}));return v.Z(m.Z(h.Z("total")),s.concat(u))},combined:{total:w.Z((function(e,t){return e+t.total}),0),counts:x.Z(S.Z("counts"),E.Z,d.Z(w.Z((function(e,t){var n=t.date,r=t.value,i=t.sum;return{date:n,value:e.value+r,sum:e.sum+i}}),{value:0,sum:0})))}}))];case 3:return _=O.sent(),console.log("Unable to fetch bucket access counts:"),console.error(_),[2,{byExt:[],byExtCollapsed:[],combined:{total:0,counts:[]}}];case 4:return[2]}}))}))},fe=function(e){return ie.UD(e).bucket},de=function(e,t){return(0,i.join)(function(e){return ie.UD(e).key}(e),t)},pe=g.Z({exts:x.Z(_.Z(["aggregations","exts","buckets"]),d.Z((function(e){return{ext:e.key,objects:e.doc_count,bytes:e.size.value}})),v.Z(m.Z(h.Z("bytes")))),totalObjects:_.Z(["hits","total"]),totalBytes:_.Z(["aggregations","totalBytes","value"])}),ve=function(e){var t=e.req,n=e.s3,i=e.bucket,o=e.overviewUrl;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,s,a,u,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.getObject({Bucket:fe(o),Key:de(o,"stats.json")}).promise()];case 2:return e=r.sent(),[2,pe(JSON.parse(e.Body.toString("utf-8")))];case 3:return s=r.sent(),console.log("Unable to fetch pre-rendered stats from '"+o+"':"),console.error(s),[3,4];case 4:return r.trys.push([4,6,,7]),a=(0,ne.Z)({index:i,action:"stats"}),[4,t("/search"+a)];case 5:return u=r.sent(),[2,pe(u)];case 6:return c=r.sent(),console.log("Unable to fetch live stats:"),console.error(c),[3,7];case 7:throw new Error("Stats unavailable")}}))}))},me=function(e){var t=e.s3,n=e.bucket,i=e.keys,o=e.version;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i.length?(e=i[0],s=i.slice(1),[4,Ee({s3:t,bucket:n,key:e,version:o})]):[2,null];case 1:return a=r.sent(),(u=a)?[3,3]:[4,me({s3:t,bucket:n,keys:s})];case 2:u=r.sent(),r.label=3;case 3:return[2,u]}}))}))},he=function(e){var t=e.s3,n=e.bucket,i=e.path,o=e.version;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return e=Array.isArray(i)?i:[i],[4,me({s3:t,bucket:n,keys:e,version:o})];case 1:if(!(s=r.sent()))throw new ae.V2(i+" for "+n+" and version "+o+" does not exist");return[2,t.getObject({Bucket:n,Key:s.key,VersionId:o}).promise()]}}))}))},ge=j.Z(h.Z("version"),he,(function(e){var t=e.s3,n=e.bucket,i=e.path;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,o,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return e=Array.isArray(i)?i:[i],[4,me({s3:t,bucket:n,keys:e})];case 1:if(!(o=r.sent()))throw new ae.s0(i+" for "+n+" does not exist");return[4,Pe({s3:t,bucket:n,path:o.key})];case 2:return s=r.sent(),a=O.Z(h.Z("isLatest"),s),u=a&&"null"!==a.id?a.id:void 0,[2,he({s3:t,bucket:n,path:o.key,version:u})]}}))}))})),ye=function(e){var t=e.s3,n=e.schemaUrl;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,i,o,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!n)return[2,null];e=ie.UD(n),i=e.bucket,o=e.key,s=e.version,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ge({s3:t,bucket:i,path:o,version:s})];case 2:return a=r.sent(),[2,JSON.parse(a.Body.toString("utf-8"))];case 3:if((u=r.sent())instanceof ae.s0||u instanceof ae.V2)throw u;return console.log("Unable to fetch"),console.error(u),[3,4];case 4:return[2,null]}}))}))},ke=function(e){var t=e.s3,n=e.bucket;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ge({s3:t,bucket:n,path:".quilt/workflows/config.yml"})];case 1:return e=r.sent(),[2,se.Qc(e.Body.toString("utf-8"))];case 2:if((i=r.sent())instanceof ae.s0||i instanceof ae.V2)return[2,se.lH];throw console.log("Unable to fetch"),console.error(i),i;case 3:return[2]}}))}))},be=["README.md","README.txt","README.ipynb"],Ze=["*.parquet","*.parquet.gz","*.csv","*.csv.gz","*.tsv","*.tsv.gz","*.txt","*.txt.gz","*.vcf","*.vcf.gz","*.xls","*.xls.gz","*.xlsx","*.xlsx.gz","*.ipynb","*.md","*.pdf","*.pdf.gz","*.json","*.json.gz"],we="quilt_summarize.json",xe=(0,oe.Z)(["Exists","DoesNotExist"]);function Se(e){var t=e.s3,n=e.bucket,i=e.key,o=e.version;return(0,r.mG)(this,void 0,void 0,(function(){var e,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=t.headObject({Bucket:n,Key:i,VersionId:o}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.promise()];case 2:return s=r.sent(),[2,xe.Exists({bucket:n,key:i,version:s.VersionId,deleted:!!s.DeleteMarker,archived:"GLACIER"===s.StorageClass||"DEEP_ARCHIVE"===s.StorageClass})];case 3:if(405===(a=r.sent()).code&&null!=o)return[2,xe.Exists({bucket:n,key:i,version:o,deleted:!0})];if("BadRequest"===a.code&&null!=o)return[2,xe.DoesNotExist()];if("NotFound"===a.code)return"true"===(u=e.response.httpResponse.headers)["x-amz-delete-marker"]?[2,xe.Exists({bucket:n,key:i,version:u["x-amz-version-id"],deleted:!0})]:[2,xe.DoesNotExist()];throw a;case 4:return[2]}}))}))}var Ee=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Se.apply(void 0,e).then(xe.case({Exists:function(e){var t=e.deleted,n=e.archived,i=(0,r._T)(e,["deleted","archived"]);return t||n?null:i},_:function(){return null}}))},_e=function(e){var t=e.s3,n=e.req,i=e.bucket,o=e.overviewUrl,s=e.inStack;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,u,l,f,v,g,y,k,b;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,Ee({s3:t,bucket:i,key:we})];case 1:if(!(e=r.sent()))return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,Ce({s3:t,handle:e})];case 3:return[2,r.sent()];case 4:return u=r.sent(),l=e.bucket+"/"+e.key,console.log("Unable to fetch configured summary from '"+l+"':"),console.error(u),[3,5];case 5:if(!o)return[3,9];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,t.getObject({Bucket:fe(o),Key:de(o,"summary.json")}).promise()];case 7:return f=r.sent(),[2,a.zG(JSON.parse(f.Body.toString("utf-8")),P.Z([],["aggregations","other","keys","buckets"]),d.Z((function(e){return{bucket:i,key:e.key,version:e.latestVersion.hits.hits[0]._source.version_id,lastModified:(t=e.lastModified,t&&new Date(t)),ext:e.latestVersion.hits.hits[0]._source.ext};var t})),N.Z([z.Z((function(e){return Ze.indexOf(e.ext)})),m.Z(h.Z("lastModified"))]),B.Z(20),d.Z(C.Z("handle")))];case 8:return v=r.sent(),console.log("Unable to fetch pre-rendered summary from '"+o+"':"),console.error(v),[3,9];case 9:if(!s)return[3,13];r.label=10;case 10:return r.trys.push([10,12,,13]),g=(0,ne.Z)({action:"sample",index:i}),[4,n("/search"+g)];case 11:return k=r.sent(),[2,a.zG(k,P.Z([],["aggregations","objects","buckets"]),d.Z((function(e){var t=e.latest.hits.hits[0]._source;return{bucket:i,key:t.key,version:t.version_id}})),B.Z(20),d.Z(C.Z("handle")))];case 12:return y=r.sent(),console.log("Unable to fetch live summary:"),console.error(y),[3,13];case 13:return r.trys.push([13,15,,16]),[4,t.listObjectsV2({Bucket:i,EncodingType:"url"}).promise()];case 14:return k=r.sent(),[2,a.zG(k,_.Z(["Contents"]),d.Z($.Z({Key:ce})),p.Z(I.Z(J.Z([R.Z(G.Z(".quilt/")),R.Z(G.Z("/")),R.Z(q.Z(we)),R.Z(T.Z(A.Z,be)),U.Z(Ze.map(D.Z(q.Z)))]),"Key")),c()(20),d.Z((function(e){return{key:e.Key,bucket:i}})),d.Z(C.Z("handle")))];case 15:return b=r.sent(),console.log("Unable to fetch summary from S3 listing:"),console.error(b),[3,16];case 16:return[2,[]]}}))}))},Oe=function(e){var t,n=e.s3,r=e.bucket,i=e.overviewUrl;return t={forced:i&&Ee({s3:n,bucket:fe(i),key:de(i,"README.md")}),discovered:Promise.all(be.map((function(e){return Ee({s3:n,bucket:r,key:e})}))).then(p.Z(Boolean))},Promise.all(Object.values(t)).then(l.Z(Object.keys(t)))},je=function(e){var t=e.req,n=e.s3,i=e.bucket,o=e.overviewUrl,s=e.inStack;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,u,l,f,v,m;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.getObject({Bucket:fe(o),Key:de(o,"summary.json")}).promise()];case 2:return e=r.sent(),[2,a.zG(JSON.parse(e.Body.toString("utf-8")),P.Z([],["aggregations","images","keys","buckets"]),d.Z((function(e){return{bucket:i,key:e.key,version:e.latestVersion.hits.hits[0]._source.version_id}})))];case 3:return u=r.sent(),console.log("Unable to fetch images sample from '"+o+"':"),console.error(u),[3,4];case 4:if(!s)return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),l=(0,ne.Z)({action:"images",index:i}),[4,t("/search"+l)];case 6:return v=r.sent(),[2,a.zG(v,P.Z([],["aggregations","objects","buckets"]),d.Z((function(e){var t=e.latest.hits.hits[0]._source;return{bucket:i,key:t.key,version:t.version_id}})),B.Z(100))];case 7:return f=r.sent(),console.log("Unable to fetch live images sample:"),console.error(f),[3,8];case 8:return r.trys.push([8,10,,11]),[4,n.listObjectsV2({Bucket:i,EncodingType:"url"}).promise()];case 9:return v=r.sent(),[2,a.zG(v,_.Z(["Contents"]),d.Z($.Z({Key:ce})),p.Z((function(e){return"GLACIER"!==e.StorageClass&&"DEEP_ARCHIVE"!==e.StorageClass&&!e.Key.startsWith("/")&&X.Qe.some((function(t){return e.Key.toLowerCase().endsWith(t)}))})),c()(100),d.Z((function(e){return{key:e.Key,bucket:i}})))];case 10:return m=r.sent(),console.log("Unable to fetch images sample from S3 listing:"),console.error(m),[3,11];case 11:return[2,[]]}}))}))},Pe=function(e){var t=e.s3,n=e.bucket,r=e.path;return t.listObjectVersions({Bucket:n,Prefix:r,EncodingType:"url"}).promise().then(x.Z((function(e){var t=e.Versions,n=e.DeleteMarkers;return t.concat(n)}),d.Z($.Z({Key:ce})),p.Z((function(e){return e.Key===r})),d.Z((function(e){return{isLatest:e.IsLatest||!1,lastModified:e.LastModified,size:e.Size,id:e.VersionId,deleteMarker:null==e.Size,archived:"GLACIER"===e.StorageClass||"DEEP_ARCHIVE"===e.StorageClass}})),v.Z(m.Z(h.Z("lastModified")))))},Ne=function(e){var t=e.s3,n=e.bucket,r=e.path,i=e.version;return t.headObject({Bucket:n,Key:r,VersionId:i}).promise().then(x.Z(_.Z(["Metadata","helium"]),M.Z(Boolean,JSON.parse)))},ze=(0,te.tT)(Y);function Be(e,t){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(n,r){return x.Z(ee.Q,ee.g.case({Web:function(){return null},S3:n,S3Rel:function(t){return e(t).then(n).catch(r)},Path:function(t){return e(t).then(n).catch(r)}}))(t.path||t)}))];case 1:return n=i.sent(),[2,(0,r.pi)((0,r.pi)({},"string"==typeof t?null:t),{handle:n})]}}))}))}var Ce=function(e){var t=e.s3,n=e.handle,i=e.resolveLogicalKey;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,o,s,a,u,c,l,f;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:return n?i&&n.logicalKey&&!n.key?[4,i(n.logicalKey)]:[3,2]:[2,null];case 1:return o=d.sent(),[3,3];case 2:o=n,d.label=3;case 3:e=o,d.label=4;case 4:return d.trys.push([4,7,,8]),[4,t.getObject({Bucket:e.bucket,Key:e.key,VersionId:e.version,IfMatch:e.etag}).promise()];case 5:if(s=d.sent(),a=s.Body.toString("utf-8"),u=JSON.parse(a),(c=ze(u)).length)throw console.error(c[0]),new Error("Invalid manifest: must be a JSON array of files or arrays of files");return l=function(t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,o;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:if(n={bucket:e.bucket,key:ie.Gc(e.key,t)},!i||!e.logicalKey)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i(ie.Gc(e.logicalKey,t))];case 2:return[2,s.sent()];case 3:return o=s.sent(),console.warn("Error resolving logical key for summary",{handle:e,path:t}),console.error(o),[2,(0,r.pi)((0,r.pi)({},n),{error:o})];case 4:return[2,n]}}))}))},[4,Promise.all(u.map((function(e){return function(e){return"string"==typeof e||e.path}(e)?Be(l,e):Promise.all(e.map(Be.bind(null,l)))})))];case 6:return[2,d.sent()];case 7:return f=d.sent(),console.log("Error loading summary:"),console.error(f),[2,[]];case 8:return[2]}}))}))},$e=".quilt/named_packages/",Ie=function(e,t){return""+$e+e+"/"+t},Je=function(e){var t,n=e.req,r=e.bucket,i=e.name;return n("/search"+(0,ne.Z)({index:r+"_packages",action:"packages",body:JSON.stringify({query:{bool:{must:[i?{term:{handle:i}}:{match_all:{}},{regexp:{pointer_file:"[0-9]{10}"}}]}},aggs:{revisions:(t="\n          return merged.count((k, v) -> !v.del);\n        ",{scripted_metric:{init_script:"\n      state.map = new HashMap();\n    ",map_script:'\n      def k = doc.key.getValue();\n      def mtime = doc.last_modified.getValue().toInstant().toEpochMilli();\n      def del = doc.delete_marker.getValue();\n      def v = ["mtime": mtime, "del": del];\n      state.map.merge(k, v, (old, val) -> val.mtime > old.mtime ? val : old);\n    ',reduce_script:"\n      def merged = new HashMap();\n      for (s in states) {\n        s.map.each((k, v) -> merged.merge(k, v, (old, val) -> val.mtime > old.mtime ? val : old));\n      }\n      "+t+"\n    "}})}}),size:0,filter_path:["took","timed_out","hits.total","aggregations.revisions"].join(",")})).then(_.Z(["aggregations","revisions","value"])).catch(ae.$4())};function Re(e){try{return JSON.parse(e)}catch(e){return}}var Ge=function(e){var t=e.s3,n=e.bucket,i=e.name,o=e.id;return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return[2,t.getObject({Bucket:n,Key:Ie(i,o)}).promise().then((function(e){return{modified:e.LastModified,hash:e.Body.toString("utf-8")}}))]}))}))};function qe(e){var t=e.s3,n=e.bucket,i=e.name,o=e.hash,s=e.maxSize,a=void 0===s?1e7:s;return(0,r.mG)(this,void 0,void 0,(function(){var e,s,u,c,l,f,v,m;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),(e=o)?[3,2]:[4,Ge({s3:t,bucket:n,name:i,id:"latest"}).then(h.Z("hash"))];case 1:e=r.sent(),r.label=2;case 2:return s=".quilt/packages/"+e,a?[4,t.headObject({Bucket:n,Key:s}).promise()]:[3,4];case 3:if((u=r.sent()).ContentLength>a)throw new ae.bg({bucket:n,key:s,maxSize:a,actualSize:u.ContentLength});r.label=4;case 4:return[4,t.getObject({Bucket:n,Key:s}).promise()];case 5:return c=r.sent(),l=(0,re.Z)(c.Body.toString("utf-8"))(V.Z("\n"),d.Z(Re),p.Z(Boolean)),f=l[0],v=l.slice(1),[2,{entries:(0,re.Z)(v)(d.Z((function(e){return[e.logical_key,{hash:e.hash.value,physicalKey:e.physical_keys[0],size:e.size,meta:e.meta}]})),K.Z),meta:f.user_meta,workflow:f.workflow}];case 6:if((m=r.sent())instanceof ae.bg)throw m;throw console.log("loadManifest error:"),console.error(m),m;case 7:return[2]}}))}))}var Te=function(e){var t=e.s3,n=e.ExpressionType,i=void 0===n?"SQL":n,o=e.InputSerialization,s=void 0===o?{JSON:{Type:"LINES"}}:o,a=(0,r._T)(e,["s3","ExpressionType","InputSerialization"]);return t.selectObjectContent((0,r.pi)({ExpressionType:i,InputSerialization:s,OutputSerialization:{JSON:{}}},a)).promise().then(x.Z(h.Z("Payload"),w.Z((function(e,t){return t.Records?e+t.Records.Payload.toString():e}),""),L.Z,j.Z(H.Z,W.Z([]),x.Z(V.Z("\n"),d.Z(JSON.parse)))))},Ae=function(e){return e.replace(/'/g,"''")},Ue="AccessCounts",De=function(e){var t=e.s3,n=e.analyticsBucket,i=e.bucket,a=e.path,u=e.today;return function(e){var t=e.s3,n=e.analyticsBucket,i=e.type,a=e.query,u=e.today,c=e.window,l=void 0===c?365:c;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,c,f,d,p;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Te({s3:t,Bucket:n,Key:Ue+"/"+i+".csv",Expression:a,InputSerialization:{CSV:{FileHeaderInfo:"Use",AllowQuotedRecordDelimiter:!0}}})];case 1:return e=r.sent(),c=e.length?JSON.parse(e[0].counts):{},f=Q.Z((function(e){var t=o.Z(u,l-e-1);return{date:t,value:c[s.Z(t,"yyyy-MM-dd")]||0}}),l),d=Object.values(c).reduce(F.Z,0),[2,{counts:f,total:d}];case 2:throw p=r.sent(),console.log("queryAccessCounts: error caught"),console.error(p),p;case 3:return[2]}}))}))}({s3:t,analyticsBucket:n,type:"Objects",query:"\n      SELECT counts FROM s3object\n      WHERE eventname = 'GetObject'\n      AND bucket = '"+Ae(i)+"'\n      AND \"key\" = '"+Ae(a)+"'\n    ",today:u,window:365})},Me=function(e){var t=e.s3,n=e.bucket,i=e.name;return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,t.listObjectsV2({Bucket:n,Prefix:""+$e+i+"/",MaxKeys:1,EncodingType:"url"}).promise()];case 1:return[2,!!e.sent().KeyCount]}}))}))},Ve=n(67294),Ke=n(13454),Le=n(80679),He=function(e){var t=e.s3,n=e.bucket,i=e.prefix,o=e.delimiter,s=e.continuationToken,a=e.maxRequests;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,u,c,l,f;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:e=0,u=[],c=[],d.label=1;case 1:return[4,t.listObjectsV2({Bucket:n,Delimiter:o,Prefix:i,ContinuationToken:l||s,EncodingType:"url"}).promise()];case 2:return f=d.sent(),u=u.concat(f.Contents||[]),c=c.concat(f.CommonPrefixes||[]),e+=1,!f.IsTruncated||e>=a?[2,(0,r.pi)((0,r.pi)({},f),{Contents:u,CommonPrefixes:c})]:(l=f.NextContinuationToken,[3,1]);case 3:return[2]}}))}))},We=function(e){var t=e.s3,n=e.bucket,i=e.path,o=void 0===i?"":i,s=e.prefix,a=e.prev,u=e.delimiter,c=void 0===u?"/":u,l=e.drain,f=void 0===l?0:l;return(0,r.mG)(void 0,void 0,Promise,(function(){return(0,r.Jh)(this,(function(e){return[2,He({s3:t,bucket:n,prefix:o+(s||""),delimiter:!1===c?void 0:c,continuationToken:a?a.continuationToken:void 0,maxRequests:!0===f?10:f}).then((function(e){var t=(e.CommonPrefixes||[]).map((function(e){return ce(e.Prefix)})).filter((function(e){return"/"!==e&&"../"!==e}));a&&a.dirs&&(t=a.dirs.concat(t)),t=Ke.Z(t);var r=(e.Contents||[]).map($.Z({Key:ce})).filter((function(e){var t=e.Key;return t!==o&&!t.endsWith("/")})).map((function(e){return{bucket:n,key:e.Key,modified:e.LastModified,size:e.Size,etag:e.ETag,archived:"GLACIER"===e.StorageClass||"DEEP_ARCHIVE"===e.StorageClass}}));return a&&a.files&&(r=a.files.concat(r)),{dirs:t,files:r,truncated:e.IsTruncated,continuationToken:e.NextContinuationToken,bucket:n,path:o,prefix:s}})).catch(ae.$4())]}))}))};function Qe(){var e=Le.S3.use();return Ve.useCallback((function(t){return We((0,r.pi)({s3:e},t))}),[e])}var Fe=n(24088),Ye=n(8598),Xe=n(13646),et=n(33287),tt=n(46974),nt=n(766),rt=function(e){var t=e.s3,n=e.schemaUrl;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,i,o,s,a,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!n)return[2,null];e=ie.UD(n),i=e.bucket,o=e.key,s=e.version,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ge({s3:t,bucket:i,path:o,version:s})];case 2:return a=r.sent(),[2,JSON.parse(a.Body.toString("utf-8"))];case 3:if((u=r.sent())instanceof ae.s0||u instanceof ae.V2)throw u;return console.log("Unable to fetch"),console.error(u),[3,4];case 4:return[2,null]}}))}))},it=function(e){return{access_key:e.accessKeyId,secret_key:e.secretAccessKey,session_token:e.sessionToken}},ot=function(e,t,n,r){return e({endpoint:""+t+(r?(0,ne.Z)(r):""),method:"POST",body:n})},st=function(e,t){return e?(0,re.Z)(e||{})((0,te.$o)(t),Fe.Z,p.Z((function(e){return!!e[0].trim()})),K.Z,M.Z(H.Z,(function(){}))):void 0},at=Ye.Z([[Xe.Z(se.h8),W.Z(void 0)],[Xe.Z(se.xW),W.Z(null)],[et.Z,y.Z]]);function ut(){var e=tt.D$(),t=nt.D$().serviceBucket,n=Le.cN.use(),i=Le.S3.use();return Ve.useMemo((function(){return function(e){var t=e.s3,n=e.credentials,i=e.req,o=e.serviceBucket;return function(e,s){var a=e.contents,u=e.message,c=e.meta,l=e.target,f=e.workflow;return(0,r.mG)(void 0,void 0,void 0,(function(){var e,d,p;return(0,r.Jh)(this,(function(v){switch(v.label){case 0:return[4,n.getPromise()];case 1:return v.sent(),e={name:l.name,registry:"s3://"+l.bucket,message:u,meta:st(c,s),workflow:at(f.slug)},d=(0,r.ev)([e],a,!0).map((function(e){return JSON.stringify(e)})).join("\n"),[4,t.upload({Bucket:o,Key:"user-requests/create-package",Body:d}).promise()];case 2:return p=v.sent(),[2,ot(i,"/packages",JSON.stringify(p.VersionId),it(n))]}}))}))}}({s3:i,credentials:n,req:e,serviceBucket:t})}),[i,n,e,t])}function ct(){var e=Le.cN.use(),t=tt.D$();return Ve.useCallback((function(n,i){return function(e,t,n,i){var o=n.message,s=n.meta,a=n.source,u=n.target,c=n.workflow;return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.getPromise()];case 1:return r.sent(),n={message:o,meta:st(s,i),name:u.name,parent:{top_hash:a.revision,registry:"s3://"+a.bucket,name:a.name},registry:"s3://"+u.bucket,workflow:at(c.slug)},[2,ot(e,"/packages/promote",n,it(t))]}}))}))}(t,e,n,i)}),[e,t])}function lt(){var e=Le.cN.use(),t=tt.D$();return Ve.useCallback((function(n){return function(e,t,n){var i=n.source;return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.getPromise()];case 1:return n.sent(),[2,ot(e,"/packages/delete-revision",{name:i.name,registry:"s3://"+i.bucket,top_hash:i.hash},it(t))]}}))}))}(t,e,n)}),[e,t])}function ft(){var e=Le.cN.use(),t=tt.D$();return Ve.useCallback((function(n,i){return function(e,t,n,i){var o=n.message,s=n.meta,a=n.source,u=n.target,c=n.workflow,l=n.entries;return(0,r.mG)(void 0,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.getPromise()];case 1:return r.sent(),n={dst:{registry:"s3://"+u.bucket,name:u.name},entries:l,message:o,meta:st(s,i),registry:"s3://"+a,workflow:at(c.slug)},[2,ot(e,"/packages/from-folder",n,it(t))]}}))}))}(t,e,n,i)}),[e,t])}},42049:(e,t,n)=>{"use strict";n.d(t,{g:()=>r,Q:()=>s});var r=n(20666).U("app/utils/Resource:Pointer",{Web:function(e){return e},S3:function(e){return e},S3Rel:function(e){return e},Path:function(e){return e}}),i=/^(https?:)?\/\//,o=/^s3:\/\//,s=function(e){if(i.test(e))return r.Web(e);if(o.test(e)){var t=e.replace(o,""),n=t.match(/^([a-z0-9-]+)?\/([^.].+)$/);if(n)return r.S3({bucket:n[1],key:n[2]});if(t.startsWith("."))return r.S3Rel(t);throw new TypeError("Invalid S3 URL: "+e)}return r.Path(e)}},20666:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(70655),i=n(21031);function o(e,t){var n=i.Z(function(e){return function(t,n){var r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return{type:e,variant:n,value:t.apply(void 0,r)}};return r.unbox=function(e){return e.value},r.is=function(t){return!!t&&t.type===e&&t.variant===n},r}}(e),t);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e[t.variant];if(o)return o.apply(void 0,(0,r.ev)([t.value],n,!1));var s=e._;return s.apply(void 0,(0,r.ev)([t],n,!1))};return t.length?i.apply(void 0,t):i}return(0,r.pi)({is:function(t){return!!t&&t.type===e},match:o,case:o},n)}},89584:(e,t,n)=>{"use strict";n.d(t,{lH:()=>w,h8:()=>y,xW:()=>b,Qc:()=>E});var r=n(70655),i=n(81249),o=n.n(i),s=n(23723),a=n(80359),u=n(57291),c=n(94631),l=n(21031);const f=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://schemas.quiltdata.com/workflows-config-1.1.0","type":"object","required":["version","workflows"],"additionalProperties":false,"definitions":{"Version":{"type":"string","pattern":"^[1-9][0-9]*(\\\\.(0|[1-9][0-9]*)){0,2}$","examples":["1","1.0"]},"CompoundVersion":{"type":"object","additionalProperties":false,"required":["base"],"properties":{"base":{"$ref":"#/definitions/Version"},"catalog":{"$ref":"#/definitions/Version"}}}},"properties":{"catalog":true,"version":{"oneOf":[{"$ref":"#/definitions/Version"},{"$ref":"#/definitions/CompoundVersion"}]},"is_workflow_required":{"type":"boolean","description":"If true, users must succeed a workflow in order to push. If false, users may skip workflows altogether.","default":true},"default_workflow":{"type":"string","description":"The workflow to use if the user doesn\'t specify a workflow."},"workflows":{"type":"object","minProperties":1,"propertyNames":{"pattern":"^[A-Za-z_-][A-Za-z0-9_-]*$","maxLength":64},"additionalProperties":{"type":"object","required":["name"],"additionalProperties":false,"properties":{"catalog":true,"name":{"type":"string","description":"The workflow name displayed by Quilt in the Python API or web UI.","minLength":1},"description":{"description":"The workflow description displayed by Quilt in the Python API or web UI.","type":"string","minLength":1},"handle_pattern":{"type":"string","format":"regex","description":"Regular expression to validate package handle","examples":["^instruments/(production|staging)$","^(employee1|employee2)/instruments$"]},"metadata_schema":{"type":"string","description":"JSON Schema $id to validate package metadata against."},"entries_schema":{"type":"string","description":"JSON Schema $id to validate package entries against."},"is_message_required":{"type":"boolean","description":"If true, the user must provide a commit message.","default":false}}}},"schemas":{"type":"object","description":"JSON Schemas for validating user-supplied metadata and/or package entries.","minProperties":1,"additionalProperties":{"type":"object","required":["url"],"properties":{"url":{"type":"string","description":"URL from where the schema will be obtained.","format":"uri"}}}},"successors":{"type":"object","description":"Buckets usable as destination with \\"Push to Bucket\\" in web UI.","examples":[{"s3://bucket1":{"title":"Bucket 1 Title","copy_data":true},"s3://bucket2":{"title":"Bucket 2 Title","copy_data":false},"s3://bucket3":{"title":"Bucket 3 Title (`copy_data` defaults to `true`)"}}],"minProperties":1,"propertyNames":{"format":"uri"},"additionalProperties":{"type":"object","required":["title"],"properties":{"title":{"type":"string","minLength":1},"copy_data":{"type":"boolean","default":true,"description":"If true, all package entries will be copied to the destination bucket. If false, all entries will remain in their current locations."}}}}}}'),d=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://schemas.quiltdata.com/workflows-config_catalog-1.0.0","definitions":{"PackageHandleTemplate":{"description":"Template for pre-filling package handle, use <%= username %> or <%= directory %> for username and parent directory substitutions","type":"string","default":""},"PackageHandleSettings":{"description":"Map of contexts triggering different templates","type":"object","additionalProperties":false,"properties":{"files":{"$ref":"#/definitions/PackageHandleTemplate","description":"Default package name used for creating package from directory"},"packages":{"$ref":"#/definitions/PackageHandleTemplate","description":"Default package name used for creating package from scratch or from another package"}}},"CatalogSettings":{"type":"object","properties":{"catalog":{"type":"object","additionalProperties":false,"properties":{"package_handle":{"$ref":"#/definitions/PackageHandleSettings"}}},"workflows":{"type":"object","additionalProperties":{"type":"object","properties":{"catalog":{"type":"object","additionalProperties":false,"properties":{"package_handle":{"$ref":"#/definitions/PackageHandleSettings"}}}}}}}}},"allOf":[{"$ref":"https://schemas.quiltdata.com/workflows-config-1.1.0"},{"$ref":"#/definitions/CatalogSettings"}]}');var p=n(99761),v=n(36473),m=n(65060),h=n(73206),g={files:"",packages:""},y=Symbol("not available"),k=function(e,t){return(0,r.pi)((0,r.pi)((0,r.pi)({},g),e),t)},b=Symbol("not selected");function Z(e,t){var n;return{isDefault:!e.default_workflow,isDisabled:!1!==e.is_workflow_required,packageName:k(null===(n=e.catalog)||void 0===n?void 0:n.package_handle),packageNamePattern:null,slug:t?b:y}}var w={isWorkflowRequired:!1,packageName:g,successors:[],workflows:[Z({},!1)]};function x(e,t){if(!o().satisfies(t,"^"+e))return new Error("Your config file version ("+e+") is incompatible with the current version of the config schema ("+t+")")}function S(e){var t=e.version,n=t.catalog?(0,p.tT)(d,[f]):(0,p.tT)(f),r=function(e){var t=e.base,n=e.catalog,r=[],i=x(t,"1.1.0");if(i&&r.push(i),n){var o=x(n,"1.0.0");o&&r.push(o)}return r.length?r:void 0}("string"==typeof t?{base:t}:t);if(r)throw new h.rA({errors:r});var i=n(e);if(i.length)throw new h.rA({errors:i})}function E(e){var t,n=(0,m.Z)(e);if(!n)return w;var i=function(e){if(S(e),e.version.catalog)return e;var t=a.Z("catalog");return t(u.Z(c.Z("workflows"),l.Z(t),e))}(n),o=i.workflows,f=Object.keys(o).map((function(e){return function(e,t,n){var r,i,o,a,u,c;return{description:t.description,isDefault:e===n.default_workflow,isDisabled:!1,entriesSchema:null===(i=null===(r=n.schemas)||void 0===r?void 0:r[t.entries_schema||""])||void 0===i?void 0:i.url,name:t.name,packageName:k(null===(o=n.catalog)||void 0===o?void 0:o.package_handle,null===(a=t.catalog)||void 0===a?void 0:a.package_handle),packageNamePattern:t.handle_pattern?new RegExp(t.handle_pattern):null,schema:(u=t.metadata_schema,c=n.schemas,u&&c&&u in c?{url:s.Z([u,"url"],c)}:void 0),slug:e}}(e,o[e],i)})),d=Z(i,!0),p=i.successors||{};return{isWorkflowRequired:!1!==i.is_workflow_required,packageName:k(null===(t=i.catalog)||void 0===t?void 0:t.package_handle),successors:Object.entries(p).map((function(e){return function(e,t){return{copyData:void 0===t.copy_data||t.copy_data,name:t.title,slug:v.UD(e).bucket||"",url:e}}(e[0],e[1])})),workflows:(0,r.ev)([d],f,!0)}}},51379:(e,t,n)=>{"use strict";n.d(t,{Qe:()=>S,ZP:()=>P});var r=n(70655),i=n(94184),o=n.n(i),s=n(13646),a=n(97716),u=n(67294),c=n(41120),l=n(92863),f=n(10529),d=n(23307),p=n(80679),v=n(43987),m=n(766),h=n(69534),g=n(46974),y=n(3920),k=n(34314),b=n(40636),Z=n.n(b),w=n(41740),x=n.n(w),S=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".tiff"],E={sm:{w:256,h:256},lg:{w:1024,h:768}},_=c.Z((function(e){return{container:{paddingBottom:"70%",position:"relative"},inner:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",left:0,position:"absolute",right:0,top:0},iconGlacier:{maxHeight:"50%",maxWidth:"50%",opacity:.1},iconError:{color:e.palette.text.primary,fontSize:80,opacity:.1}}}));function O(e){var t=e.icon,n=e.className,i=e.animate,s=(0,r._T)(e,["icon","className","animate"]),a=_();return u.createElement(d.Z,(0,r.pi)({borderRadius:"borderRadius",className:o()(n,a.container),animate:null!=i?i:!t},s),"glacier"===t&&u.createElement("div",{className:a.inner},u.createElement("img",{alt:"",src:x(),className:a.iconGlacier})),"error"===t&&u.createElement("div",{className:a.inner},u.createElement(l.Z,{className:a.iconError},"error_outline")))}var j=c.Z({root:{background:'0 0 url("'+Z()+'") repeat'}});function P(e){var t=e.handle,n=e.size,i=void 0===n?"sm":n,c=e.alt,l=void 0===c?"":c,d=e.skeletonProps,b=e.className,Z=(0,r._T)(e,["handle","size","alt","skeletonProps","className"]),w=(0,m.ZR)().binaryApiGatewayEndpoint,x=p.Ep.useS3Signer(),S=j(),_=u.useState(v.Z.Init()),P=_[0],N=_[1];(0,k.Z)(t,(function(e){if(!s.Z(t,e)){var n,o=x(t),a=w+"/thumbnail"+(0,h.gL)({url:o,size:(n=i,"w"+E[n].w+"h"+E[n].h),output:"raw"});N(v.Z.Pending()),function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return 200===(t=r.sent()).status?[2,t.blob()]:[4,t.text()];case 2:throw n=r.sent(),new g.Bb(t,n)}}))}))}(a).then((function(e){var t=window.URL.createObjectURL(e);N(v.Z.Ok(t))})).catch((function(e){N(v.Z.Err(e))}))}}));var z=(0,y.Z)(P)(v.Z.case({Ok:a.Z,_:function(){return null}}));return u.useEffect((function(){return function(){z&&window.URL.revokeObjectURL(z)}}),[z]),(0,y.Z)(P)(v.Z.case({_:function(){return u.createElement(O,(0,r.pi)({},d,Z))},Ok:function(e){return u.createElement(f.Z,(0,r.pi)({className:o()(S.root,b),component:"img",src:e,alt:l},Z))},Err:function(e){var t="Error loading image",n="error";return e instanceof g.Bb&&(e.json&&"Forbidden"===e.json.error&&e.json.text&&e.json.text.match(/InvalidObjectState/)?(t="Object archived",n="glacier"):e.message&&(t=e.message)),u.createElement(O,(0,r.pi)({icon:n},d,Z,{title:Z.title?Z.title+": "+t:t}))}}))}},99761:(e,t,n)=>{"use strict";n.d(t,{ip:()=>T,Qt:()=>q,Lp:()=>I,KX:()=>Z,j:()=>_,FA:()=>j,$o:()=>M,tT:()=>A,Dm:()=>R});var r=n(70655),i=n(1581),o=n.n(i),s=n(5477),a=n.n(s),u=n(90584),c=n(90912),l=n(8598),f=n(3846),d=n(33287),p=n(2696),v=n(18865),m=n(10180),h=n(13646),g=n(57110),y=n(19344),k=n(13462),b=n(80359),Z=function(e){return"array"===(null==e?void 0:e.type)},w=function(e){return"object"===(null==e?void 0:e.type)},x=function(e){return"string"===(null==e?void 0:e.type)},S=function(e){return"number"===(null==e?void 0:e.type)},E=function(e){return"integer"===(null==e?void 0:e.type)},_=function(e){return"boolean"===(null==e?void 0:e.type)},O=function(e){return"null"===(null==e?void 0:e.type)},j=function(e){return!!(null==e?void 0:e.enum)},P=function(e){return!!(null==e?void 0:e.oneOf)},N=function(e){return!!(null==e?void 0:e.anyOf)},z=function(e){return!!(null==e?void 0:e.allOf)},B=function(e){return!!(null==e?void 0:e.const)};function C(e){return!!e&&["anyOf","oneOf","not","allOf"].some((function(t){return e[t]}))}var $=function(e){return!!(null==e?void 0:e.$ref)},I=c.Z(Z,w);function J(e,t,n){return C(e)?e[t].map(R).filter((function(e){return"undefined"!==e})).join(n):""}function R(e){return e?l.Z([[j,function(){return"enum"}],[B,function(){return"const"}],[_,function(){return"boolean"}],[O,function(){return"null"}],[f.Z("","type"),function(){return Array.isArray(e.type)?e.type.join("|"):e.type}],[N,function(){return J(e,"anyOf","|")}],[P,function(){return J(e,"oneOf","|")}],[z,function(){return J(e,"allOf","&")}],[C,function(){return"compound"}],[$,function(){return"$ref"}],[d.Z,function(){return"undefined"}]])(e):""}function G(e,t,n){return!n||!!C(n)&&n[t].filter(p.Z("type")).some((function(t){return q(e,t)}))}function q(e,t){return!t||l.Z([[j,function(){return v.Z(e,f.Z([],"enum",t))}],[function(e){return Array.isArray(null==e?void 0:e.type)},function(){return t.type.some((function(t){return q(e,t)}))}],[N,function(){return G(e,"anyOf",t)}],[P,function(){return G(e,"oneOf",t)}],[z,function(){return G(e,"allOf",t)}],[Z,function(){return Array.isArray(e)}],[w,function(){return m.Z(Object,e)}],[x,function(){return m.Z(String,e)}],[E,function(){return Number.isInteger(e)}],[S,function(){return m.Z(Number,e)}],[O,function(){return h.Z(null,e)}],[_,function(){return m.Z(Boolean,e)}],[d.Z,d.Z]])(t)}var T={};function A(e,t,n){var i=g.Z(e||T);i.$id||(i=i.id?y.Z(k.Z("$id",i.id),b.Z("id"))(i):k.Z("$id","main_schema",i));var s=t?(0,r.ev)([i],t,!0):[i],u=s[0].$id,c=(0,r.pi)({allErrors:!0,schemaId:"$id",schemas:s,useDefaults:!0},n);try{var l=new(o())(c);return a()(l,["date","regex","uri"]),l.addKeyword("dateformat"),u?function(e){return l.validate(u,g.Z(e)),l.errors||[]}:function(){return[new Error("$id is not provided")]}}catch(e){return function(){return e instanceof Error?[e]:[]}}}function U(e,t,n){return n&&(null==n?void 0:n.properties)?Object.keys(n.properties).reduce((function(r,i){var o=void 0===t?void 0:t[i];if(o&&!m.Z(Object,o))return r;var s=f.Z({},i,n.properties);if(s.properties)return k.Z(i,U(e,o,s),r);if(s.items&&Array.isArray(o))return k.Z(i,o.map((function(t){return U(e,t,s.items)})),r);var a=e(s);return a?k.Z(i,a,r):r}),t):t}function D(e){if(e){if(void 0!==e.default)return e.default;try{if("date"===e.format&&e.dateformat)return u.Z(new Date,e.dateformat)}catch(e){console.error(e)}}}function M(e){return function(t){return U(D,t,e)}}},3920:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(19344),i=n(11434);const o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.Z.apply(i,t).apply(void 0,e)}}},65060:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1272);function i(e){try{return r.ZP.load(e,"utf8")}catch(e){console.error(e)}}}}]);
//# sourceMappingURL=5677.78ab5f440a56d98ea898.chunk.js.map