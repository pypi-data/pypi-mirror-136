"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[1345],{24402:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(93993),r=n(95669),l=n(20926),i=n(43880),o=n(12338);const c=(0,a.Z)((function(e){return(0,r.Z)((0,o.Z)(l.Z,0,(0,i.Z)("length",e)),(function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1}))}))},77584:(e,t,n)=>{n.d(t,{Z:()=>a});const a=(0,n(81353).Z)((function(e,t){for(var n={},a={},r=0,l=e.length;r<l;)a[e[r]]=1,r+=1;for(var i in t)a.hasOwnProperty(i)||(n[i]=t[i]);return n}))},82067:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(98388);const r=(0,n(81353).Z)((function(e,t){return(0,a.Z)([e],t)}))},35064:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(80891);const r=(0,n(12338).Z)(a.Z,0)},33129:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(70655);function r(e){return(0,a.mG)(this,void 0,Promise,(function(){return(0,a.Jh)(this,(function(t){return[2,new Promise((function(t){setTimeout(t,e)}))]}))}))}},74391:(e,t,n)=>{n.d(t,{Z:()=>B});var a=n(70655),r=n(94184),l=n.n(r),i=n(8598),o=n(10180),c=n(33287),u=n(35064),s=n(24402),m=n(13646),d=n(67294),f=n(41120),p=n(92863),v=n(8920),h=n(63457),E=n(10529),Z=n(9001),y=n(33129),g=f.Z((function(e){return{root:{fontFamily:e.typography.monospace.fontFamily,fontSize:e.typography.body2.fontSize,overflow:"auto",whiteSpace:"pre",width:"100%"},more:{color:e.palette.text.secondary},flex:{display:"flex"},compoundInner:{paddingLeft:e.spacing(2)},hidden:{display:"none"},iconBlank:{paddingRight:e.spacing(2.5)},key:{fontWeight:e.typography.fontWeightBold}}})),k=function(e){var t=e.classes;return d.createElement("div",{className:t.iconBlank})},b=function(){return d.createElement(p.Z,{fontSize:"small"},"chevron_right")},w=function(){return d.createElement(p.Z,{fontSize:"small"},"expand_more")},S=f.Z((function(e){return{root:{color:e.palette.text.secondary,display:"flex",fontFamily:e.typography.monospace.fontFamily,fontSize:e.typography.body2.fontSize,marginLeft:e.spacing(2)}}})),x=function(){var e=S();return d.createElement("span",{className:e.root},d.createElement(p.Z,{fontSize:"small"},"hourglass_empty"),"rendering…")};function C(e){var t=e.children,n=e.classes;return!!t&&d.createElement("div",{className:n.key},t,": ")}var N=i.Z([[o.Z(String),function(e){return'"'+e+'"'}],[c.Z,function(e){return""+e}]]);function W(e){var t=e.name,n=e.value,a=e.topLevel,r=void 0===a||a,l=e.classes;return d.createElement("div",{className:l.flex},!r&&d.createElement(k,{classes:l}),d.createElement(C,{classes:l},t),d.createElement("div",null,N(n)))}function I(e){var t=e.keys,n=e.classes;return d.createElement("span",{className:n.more},"<","…",t,">")}var O=function(e,t){return e?d.createElement(d.Fragment,null,e,", ",t):t};function z(e){var t=e.name,n=e.value,a=e.topLevel,r=void 0===a||a,i=e.defaultExpanded,o=void 0!==i&&i,c=e.showKeysWhenCollapsed,s=e.classes,m=Array.isArray(n)?"[]":"{}",f=d.useMemo((function(){return Object.entries(n)}),[n]),p=d.useState(!!o),v=p[0],h=p[1],E=d.useCallback((function(){return h((function(e){return!e}))}),[]),Z=!f.length,y=!Z&&v,g=d.useCallback((function(){var e=c-u.Z([2,4,20/8.6,t?t.length+2:0,4]);return e<=0||Array.isArray(n)?d.createElement(I,{keys:f.length,classes:s}):f.reduce((function(e,t){var n=t[0];return e.done?e:e.availableSpace<n.length?{str:O(e.str,d.createElement(I,{keys:f.length-e.keys,classes:s})),done:!0}:{str:O(e.str,d.createElement("span",{className:s.key},n)),availableSpace:e.availableSpace-n.length-(e.str?2:0),keys:e.keys+1,done:!1}}),{str:null,availableSpace:e,keys:0,done:!1}).str}),[s,f,t,c,n]);return d.createElement("div",null,d.createElement("div",{className:s.flex,onClick:E},Z?!r&&d.createElement(k,{classes:s}):y?d.createElement(w,null):d.createElement(b,null),d.createElement(C,{classes:s},t),m[0],!y&&d.createElement(d.Fragment,null,Z?"":d.createElement("span",null," ",g()," "),m[1])),y&&d.createElement(d.Suspense,{fallback:d.createElement(d.Fragment,null,d.createElement(x,null),m[1])},d.createElement("div",{className:l()(s.compoundInner)},f.map((function(e){var t=e[0],n=e[1];return d.createElement(_,{classes:s,key:t,name:t,value:n,topLevel:!1,defaultExpanded:Number.isInteger(o)&&o>0?o-1:o,showKeysWhenCollapsed:c-20/8.6})})),d.createElement("div",{onClick:E},m[1]))))}var L=s.Z([o.Z(String),o.Z(Number),o.Z(Boolean),m.Z(null),m.Z(void 0)]);function _(e){var t=function(e,t,n){var r=this;return(0,Z.Z)([e,t],(function(){return d.lazy((function(){return(0,a.mG)(r,void 0,void 0,(function(){return(0,a.Jh)(this,(function(r){switch(r.label){case 0:return[4,(0,y.Z)(n||0)];case 1:return r.sent(),[2,{default:function(){return d.createElement(e,(0,a.pi)({},t))}}]}}))}))}))}))}(L(e.value)?W:z,e);return d.createElement(t,null)}function B(e){var t,n=e.name,r=e.value,i=e.topLevel,o=e.defaultExpanded,c=e.showKeysWhenCollapsed,u=void 0===c?"auto":c,s=e.className,m=(0,a._T)(e,["name","value","topLevel","defaultExpanded","showKeysWhenCollapsed","className"]),f=g(),p=(t=v.Z(),["sm","md","lg"].reduce((function(e,n){return h.Z(t.breakpoints.up(n))?t.breakpoints.width(n):e}),320)),Z=d.useMemo((function(){return!0===u||!1===u?Number.POSITIVE_INFINITY:"auto"===u?(p-80)/8.6:u}),[u,p]);return d.createElement(E.Z,(0,a.pi)({className:l()(s,f.root)},m),d.createElement(d.Suspense,{fallback:d.createElement(x,null)},d.createElement(_,(0,a.pi)({},{name:n,value:r,topLevel:i,defaultExpanded:o,classes:f},{showKeysWhenCollapsed:Z}))))}},38751:(e,t,n)=>{var a=n(70655),r=n(82067),l=n(77584),i=n(67294),o=n(73935),c=n(10529),u=n(282),s=n(39803),m=n(22318),d=n(13457),f=(n(12327),n(74391)),p=n(1942),v=n(24452),h=n(97456),E=n(766),Z=n(89978),y=n(19083),g=n(28238),k=n(92816),b=n(31274),w=n(57996),S=n(68420),x=n(40018),C=window.location.origin,N=window.location.origin,W=function(){return""+Math.random()};function I(e){var t=i.useState(e),n=t[0],a=t[1],r=i.useCallback((function(e){a(e.target.value)}),[a]);return{value:n,set:a,input:{value:n,onChange:r}}}function O(){var e=this,t=E.ZR(),n=y.D$({clientId:t.oktaClientId,baseUrl:t.oktaBaseUrl}),o=i.useRef(null),d=i.useState(W),p=d[0],v=d[1],h="/__embed"+(0,w.Z)({nonce:p,origin:N}),Z={credentials:I("{}"),bucket:I(""),path:I(""),scope:I(""),rest:I("{}"),route:I(""),newRoute:I("")},g=i.useState([]),k=g[0],b=g[1],S=i.useCallback((function(e,t){var n=t.type,l=(0,a._T)(t,["type"]);b(r.Z({direction:e,type:n,contents:l,time:new Date}))}),[b]),x=i.useMemo((function(){try{return(0,a.pi)({bucket:Z.bucket.value,path:Z.path.value,scope:Z.scope.value,credentials:JSON.parse(Z.credentials.value),route:Z.route.value},JSON.parse(Z.rest.value||"{}"))}catch(e){return e}}),[Z.credentials.value,Z.bucket.value,Z.path.value,Z.scope.value,Z.rest.value,Z.route.value]),O=i.useCallback((function(){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,n()];case 1:return e=t.sent(),Z.credentials.set(JSON.stringify({provider:"okta",token:e})),[2]}}))}))}),[n,Z.credentials.set]),z=i.useCallback((function(e){o.current&&(o.current.contentWindow.postMessage(e,C),S("out",e))}),[o,S]),L=i.useCallback((function(){x instanceof Error||z((0,a.pi)({type:"init"},x))}),[z,x]),_=i.useCallback((function(){z({type:"navigate",route:Z.newRoute.value})}),[z,Z.newRoute.value]),B=i.useCallback((function(){v(W),b([])}),[v,b]),F=i.useCallback((function(e){e.source===o.current.contentWindow&&e.origin===C&&"quilt-embed"===e.data.source&&p===e.data.nonce&&S("in",l.Z(["source","nonce"],e.data))}),[o,S,p]);return i.useEffect((function(){return window.addEventListener("message",F),function(){window.removeEventListener("message",F)}}),[F]),i.createElement(c.Z,{display:"flex",justifyContent:"space-between",p:2,maxHeight:"100vh"},i.createElement(c.Z,{display:"flex",flexDirection:"column",flexGrow:1,pr:2,maxWidth:400,overflow:"auto"},i.createElement(u.Z,{variant:"outlined",onClick:O},"Get credentials from Okta"),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({multiline:!0,label:"Credentials (JSON)",rowsMax:10,fullWidth:!0},Z.credentials.input)),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({label:"Bucket",fullWidth:!0},Z.bucket.input)),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({label:"Path",fullWidth:!0},Z.path.input)),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({label:"Route",fullWidth:!0},Z.route.input)),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({label:"Scope",fullWidth:!0},Z.scope.input)),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({multiline:!0,label:"Extra params (JSON, merged with the rest)",rowsMax:10,fullWidth:!0},Z.rest.input)),i.createElement(c.Z,{mt:2}),i.createElement(u.Z,{variant:"outlined",onClick:L},"init"),i.createElement(c.Z,{mt:1}),i.createElement(u.Z,{variant:"outlined",onClick:B},"reload iframe"),i.createElement(c.Z,{mt:2},x instanceof Error?""+x:i.createElement(f.Z,{name:"init params",value:x,defaultExpanded:!0})),i.createElement(c.Z,{mt:4}),i.createElement(u.Z,{variant:"outlined",onClick:_},"navigate to"),i.createElement(c.Z,{mt:2}),i.createElement(s.Z,(0,a.pi)({label:"New route",fullWidth:!0},Z.newRoute.input))),i.createElement(c.Z,{flexShrink:0},i.createElement("iframe",{title:"embed",src:h,width:"900",height:"600",ref:o,style:{border:"1px solid"}}),i.createElement(c.Z,{mt:3},i.createElement(m.Z,{variant:"h6",gutterBottom:!0},"Messages"),k.map((function(e){return i.createElement(c.Z,{key:e.time.toISOString()},i.createElement(f.Z,{name:"["+e.time.toISOString()+"] "+("in"===e.direction?"<==":"==>")+" "+e.type,value:e.contents,color:"in"===e.direction?"error"===e.type?"error.main":"success.main":void 0}))})))))}var z=(0,Z.Y)((function(){return function(){return i.createElement("h1",{style:{alignItems:"center",color:"#fff",display:"flex",height:"90vh",justifyContent:"center",maxHeight:"600px"}},"Something went wrong")}}));o.render(i.createElement((function(){return S.b1(z,[d.Z,{theme:h.yG}],x.Z,p.fC,k.zt,b.z,g.zt,[E.zt,{path:"/config.json"}],[i.Suspense,{fallback:i.createElement(v.Z,{color:"text.secondary"})}],O)}),null),document.getElementById("app"))}},e=>{e.O(0,[4687,5972],(()=>{return t=38751,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=embed-debug-harness.c12dd27ff53519946156.js.map