{"version":3,"file":"app.11a33827813152c4135c.js","mappings":"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","sources":["webpack://quilt-navigator/./app/components/Redirect/index.js","webpack://quilt-navigator/./app/utils/redirect.js","webpack://quilt-navigator/./app/containers/App/App.js","webpack://quilt-navigator/./app/constants/routes.js","webpack://quilt-navigator/./app/favicon.ico","webpack://quilt-navigator/./app/quilt-og.png","webpack://quilt-navigator/./app/app.tsx","webpack://quilt-navigator/./app/utils/fontLoader.ts","webpack://quilt-navigator/./app/components/Experiments/Experiments.js","webpack://quilt-navigator/./app/utils/storage.js","webpack://quilt-navigator/./app/utils/tracking.js"],"sourcesContent":["/* Redirect */\nimport * as React from 'react'\n\nimport redirect from 'utils/redirect'\nimport Working from 'components/Working'\n\nexport default ({ url }) => {\n  React.useEffect(() => {\n    redirect(url)\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\n\n  return <Working />\n}\n","export default function redirect(loc) {\n  window.location = loc\n}\n","import * as R from 'ramda'\nimport * as React from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\nimport Placeholder from 'components/Placeholder'\nimport AbsRedirect from 'components/Redirect'\nimport { isAdmin } from 'containers/Auth/selectors'\nimport requireAuth from 'containers/Auth/wrapper'\nimport { CatchNotFound, ThrowNotFound } from 'containers/NotFoundPage'\nimport * as Config from 'utils/Config'\nimport * as NamedRoutes from 'utils/NamedRoutes'\nimport * as RT from 'utils/reactTools'\nimport { useLocation } from 'utils/router'\n\nconst SuspensePlaceholder = () => <Placeholder color=\"text.secondary\" />\nconst StoryBook = RT.mkLazy(() => import('containers/StoryBook'), SuspensePlaceholder)\n\nconst redirectTo =\n  (path) =>\n  ({ location: { search } }) =>\n    <Redirect to={`${path}${search}`} />\n\nconst requireAdmin = requireAuth({ authorizedSelector: isAdmin })\n\nconst Activate = ({\n  match: {\n    params: { token },\n  },\n}) => {\n  const { registryUrl } = Config.useConfig()\n  const { urls } = NamedRoutes.use()\n  return <AbsRedirect url={urls.activate({ registryUrl, token })} />\n}\n\nconst LegacyPackages = ({ location: l }) => {\n  const { legacyPackagesRedirect } = Config.useConfig()\n  const { urls } = NamedRoutes.use()\n  return <AbsRedirect url={urls.legacyPackages(legacyPackagesRedirect, l)} />\n}\n\nconst Admin = RT.mkLazy(() => import('containers/Admin'), Placeholder)\nconst AuthActivationError = RT.mkLazy(\n  () => import('containers/Auth/ActivationError'),\n  Placeholder,\n)\nconst AuthCode = requireAuth()(\n  RT.mkLazy(() => import('containers/Auth/Code'), Placeholder),\n)\nconst AuthPassChange = RT.mkLazy(() => import('containers/Auth/PassChange'), Placeholder)\nconst AuthPassReset = RT.mkLazy(() => import('containers/Auth/PassReset'), Placeholder)\nconst AuthSignIn = RT.mkLazy(() => import('containers/Auth/SignIn'), Placeholder)\nconst AuthSignOut = RT.mkLazy(() => import('containers/Auth/SignOut'), Placeholder)\nconst AuthSignUp = RT.mkLazy(() => import('containers/Auth/SignUp'), Placeholder)\nconst AuthSSOSignUp = RT.mkLazy(() => import('containers/Auth/SSOSignUp'), Placeholder)\nconst Bucket = RT.mkLazy(() => import('containers/Bucket'), Placeholder)\nconst Search = RT.mkLazy(() => import('containers/Search'), Placeholder)\nconst UriResolver = RT.mkLazy(() => import('containers/UriResolver'), Placeholder)\n\nconst Landing = RT.mkLazy(() => import('website/pages/Landing'), Placeholder)\nconst OpenLanding = RT.mkLazy(() => import('website/pages/OpenLanding'), Placeholder)\nconst OpenProfile = requireAuth()(\n  RT.mkLazy(() => import('website/pages/OpenProfile'), Placeholder),\n)\nconst Install = RT.mkLazy(() => import('website/pages/Install'), Placeholder)\n\nconst MAbout = RT.mkLazy(() => import('website/pages/About'), Placeholder)\nconst MPersonas = RT.mkLazy(() => import('website/pages/Personas'), Placeholder)\nconst MProduct = RT.mkLazy(() => import('website/pages/Product'), Placeholder)\n\nconst Example = RT.mkLazy(() => import('website/pages/Example'), Placeholder)\nconst BioIT = RT.mkLazy(() => import('website/pages/BioIT'), Placeholder)\n\nexport default function App() {\n  const cfg = Config.useConfig()\n  const protect = React.useMemo(\n    () => (cfg.alwaysRequiresAuth ? requireAuth() : R.identity),\n    [cfg.alwaysRequiresAuth],\n  )\n  const { paths, urls } = NamedRoutes.use()\n  const l = useLocation()\n\n  const Home = React.useMemo(\n    () => protect(cfg.mode === 'OPEN' ? OpenLanding : Landing),\n    [protect, cfg.mode],\n  )\n\n  return (\n    <CatchNotFound id={`${l.pathname}${l.search}${l.hash}`}>\n      <Switch>\n        <Route path={paths.home} component={Home} exact />\n\n        {process.env.NODE_ENV === 'development' && (\n          <Route path={paths.example} component={Example} />\n        )}\n\n        {(cfg.mode === 'MARKETING' || cfg.mode === 'PRODUCT') && (\n          <Route path={paths.install} component={Install} exact />\n        )}\n\n        {!!cfg.legacyPackagesRedirect && (\n          <Route path={paths.legacyPackages} component={LegacyPackages} />\n        )}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.search} component={protect(Search)} exact />\n        )}\n\n        {cfg.mode === 'MARKETING' && (\n          <Route path={paths.about} component={MAbout} exact />\n        )}\n        {cfg.enableMarketingPages && (\n          <Route path={paths.personas} component={MPersonas} exact />\n        )}\n        {cfg.enableMarketingPages && (\n          <Route path={paths.product} component={MProduct} exact />\n        )}\n        {cfg.mode === 'MARKETING' && <Route path=\"/bioit\" component={BioIT} exact />}\n        {cfg.mode === 'MARKETING' && <Route path=\"/aws\" component={BioIT} exact />}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.activate} component={Activate} exact />\n        )}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.signIn} component={AuthSignIn} exact />\n        )}\n        {!cfg.disableNavigator && (\n          <Route path=\"/login\" component={redirectTo(urls.signIn())} exact />\n        )}\n        {!cfg.disableNavigator && (\n          <Route path={paths.signOut} component={AuthSignOut} exact />\n        )}\n        {!cfg.disableNavigator && (cfg.passwordAuth === true || cfg.ssoAuth === true) && (\n          <Route path={paths.signUp} component={AuthSignUp} exact />\n        )}\n        {!cfg.disableNavigator && cfg.ssoAuth === true && (\n          <Route path={paths.ssoSignUp} component={AuthSSOSignUp} exact />\n        )}\n        {!cfg.disableNavigator && !!cfg.passwordAuth && (\n          <Route path={paths.passReset} component={AuthPassReset} exact />\n        )}\n        {!cfg.disableNavigator && !!cfg.passwordAuth && (\n          <Route path={paths.passChange} component={AuthPassChange} exact />\n        )}\n        {!cfg.disableNavigator && <Route path={paths.code} component={AuthCode} exact />}\n        {!cfg.disableNavigator && (\n          <Route path={paths.activationError} component={AuthActivationError} exact />\n        )}\n\n        {cfg.mode === 'OPEN' && (\n          <Route path={paths.profile} component={OpenProfile} exact />\n        )}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.admin} component={requireAdmin(Admin)} />\n        )}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.uriResolver} component={protect(UriResolver)} />\n        )}\n\n        {!cfg.disableNavigator && (\n          <Route path={paths.bucketRoot} component={protect(Bucket)} />\n        )}\n\n        {process.env.NODE_ENV !== 'production' && (\n          <Route path={paths.storyBook} component={StoryBook} exact />\n        )}\n\n        <Route component={protect(ThrowNotFound)} />\n      </Switch>\n    </CatchNotFound>\n  )\n}\n","import { mkSearch } from 'utils/NamedRoutes'\nimport { encode } from 'utils/s3paths'\n\nconst PACKAGE_PATTERN = '[^/]+/[^/]+'\n\nexport const home = {\n  path: '/',\n  url: ({ q } = {}) => `/${mkSearch({ q })}`,\n}\n\nexport const install = {\n  path: '/install',\n  url: () => '/install',\n}\n\n// marketing\nexport const about = {\n  path: '/about',\n  url: () => '/about',\n}\n\nexport const personas = {\n  path: '/personas',\n  url: () => '/personas',\n}\n\nexport const product = {\n  path: '/product',\n  url: () => '/product',\n}\n\nexport const activate = {\n  path: '/activate/:token',\n  url: ({ registryUrl, token }) => `${registryUrl}/activate/${token}`,\n}\n\nexport const example = {\n  path: '/__example',\n  url: () => '/__example',\n}\n\n// auth\nexport const signIn = {\n  path: '/signin',\n  url: (next) => `/signin${mkSearch({ next })}`,\n}\nexport const signOut = {\n  path: '/signout',\n  url: () => '/signout',\n}\nexport const signUp = {\n  path: '/signup',\n  url: (next) => `/signup${mkSearch({ next })}`,\n}\nexport const passReset = {\n  path: '/reset_password',\n  url: () => '/reset_password',\n}\nexport const passChange = {\n  path: '/reset_password/:link',\n  url: (link) => `/reset_password/${link}`,\n}\nexport const ssoSignUp = {\n  path: '/signup-sso',\n  url: ({ provider, token, next }) => `/signup-sso${mkSearch({ provider, token, next })}`,\n}\nexport const code = {\n  path: '/code',\n  url: () => '/code',\n}\nexport const activationError = {\n  path: '/activation_error',\n  url: () => '/activation_error',\n}\n\n// profile\nexport const profile = {\n  path: '/profile',\n  url: () => '/profile',\n}\n\n// global search\nexport const search = {\n  path: '/search',\n  url: ({ q, buckets, p, mode, retry }) =>\n    `/search${mkSearch({ q, buckets, p, mode, retry })}`,\n}\n\n// immutable URI resolver\nexport const uriResolver = {\n  path: '/uri/:uri(.*)',\n  url: (uri) => `/uri/${uri ? encodeURIComponent(uri) : ''}`,\n}\n\n// bucket\nexport const bucketRoot = {\n  path: '/b/:bucket',\n  url: (bucket) => `/b/${bucket}`,\n}\nexport const bucketOverview = bucketRoot\nexport const bucketSearch = {\n  path: '/b/:bucket/search',\n  url: (bucket, { q, p, mode, retry } = {}) =>\n    `/b/${bucket}/search${mkSearch({ q, p, mode, retry })}`,\n}\nexport const bucketFile = {\n  path: '/b/:bucket/tree/:path(.*[^/])',\n  url: (bucket, path, version, mode) =>\n    `/b/${bucket}/tree/${encode(path)}${mkSearch({ mode, version })}`,\n}\nexport const bucketDir = {\n  path: '/b/:bucket/tree/:path(.+/)?',\n  url: (bucket, path = '', prefix) =>\n    `/b/${bucket}/tree/${encode(path)}${mkSearch({ prefix: prefix || undefined })}`,\n}\nexport const bucketPackageList = {\n  path: '/b/:bucket/packages/',\n  url: (bucket, { filter, sort, p } = {}) =>\n    `/b/${bucket}/packages/${mkSearch({ filter, sort, p })}`,\n}\nexport const bucketPackageDetail = {\n  path: `/b/:bucket/packages/:name(${PACKAGE_PATTERN})`,\n  url: (bucket, name) => `/b/${bucket}/packages/${name}`,\n}\nexport const bucketPackageTree = {\n  path: `/b/:bucket/packages/:name(${PACKAGE_PATTERN})/tree/:revision/:path(.*)?`,\n  url: (bucket, name, revision, path = '', mode) =>\n    path || (revision && revision !== 'latest')\n      ? `/b/${bucket}/packages/${name}/tree/${revision || 'latest'}/${encode(\n          path,\n        )}${mkSearch({ mode })}`\n      : bucketPackageDetail.url(bucket, name),\n}\nexport const bucketPackageRevisions = {\n  path: `/b/:bucket/packages/:name(${PACKAGE_PATTERN})/revisions`,\n  url: (bucket, name, { p } = {}) =>\n    `/b/${bucket}/packages/${name}/revisions${mkSearch({ p })}`,\n}\n\nexport const bucketQueries = {\n  path: '/b/:bucket/queries',\n  url: (bucket) => `/b/${bucket}/queries`,\n}\n\nexport const bucketESQueries = {\n  path: '/b/:bucket/queries/es',\n  url: (bucket) => `/b/${bucket}/queries/es`,\n}\n\nexport const bucketAthenaQueries = {\n  path: '/b/:bucket/queries/athena',\n  url: (bucket) => `/b/${bucket}/queries/athena`,\n}\n\nexport const bucketAthenaQueryExecution = {\n  path: '/b/:bucket/queries/athena/:queryExecutionId',\n  url: (bucket, queryExecutionId) => `/b/${bucket}/queries/athena/${queryExecutionId}`,\n}\n\n// legacy stuff\nexport const legacyPackages = {\n  path: `/package/:path+`,\n  url: (root, loc) => `${root}${loc.pathname}${loc.search}${loc.hash}`,\n}\n\n// admin\nexport const admin = {\n  path: '/admin',\n  url: () => '/admin',\n}\nexport const adminUsers = admin\nexport const adminBuckets = {\n  path: '/admin/buckets',\n  url: (bucket) => `/admin/buckets${mkSearch({ bucket })}`,\n}\nexport const adminSettings = {\n  path: '/admin/settings',\n  url: () => '/admin/settings',\n}\n\n// storybook\nexport const storyBook = {\n  path: '/storybook',\n  url: () => '/storybook',\n}\n","export default __webpack_public_path__ + \"favicon.ico\";","export default __webpack_public_path__ + \"quilt-og.png\";","/* app.tsx - application entry point */\n/* eslint-disable import/first */\n\n// Import all the third party stuff\nimport * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport { useLocation } from 'react-router-dom'\nimport { createBrowserHistory as createHistory } from 'history'\nimport * as M from '@material-ui/core'\n\n// side-effect: inject global css\nimport 'sanitize.css'\n\n// Import root app\nimport Error from 'components/Error'\nimport { ExperimentsProvider } from 'components/Experiments'\nimport * as Intercom from 'components/Intercom'\nimport Layout from 'components/Layout'\nimport Placeholder from 'components/Placeholder'\nimport App from 'containers/App'\nimport * as Auth from 'containers/Auth'\nimport * as Notifications from 'containers/Notifications'\nimport * as routes from 'constants/routes'\nimport * as style from 'constants/style'\nimport * as AWS from 'utils/AWS'\nimport * as APIConnector from 'utils/APIConnector'\nimport { GraphQLProvider } from 'utils/GraphQL'\nimport { BucketCacheProvider } from 'utils/BucketCache'\nimport * as Config from 'utils/Config'\nimport { createBoundary } from 'utils/ErrorBoundary'\nimport * as NamedRoutes from 'utils/NamedRoutes'\nimport * as Cache from 'utils/ResourceCache'\nimport * as Sentry from 'utils/Sentry'\nimport * as Store from 'utils/Store'\nimport fontLoader from 'utils/fontLoader'\nimport { nest } from 'utils/reactTools'\nimport RouterProvider, { LOCATION_CHANGE, selectLocation } from 'utils/router'\nimport mkStorage from 'utils/storage'\nimport * as Tracking from 'utils/tracking'\n// Load the icons\n/* eslint-disable import/no-unresolved, import/extensions */\nimport '!file-loader?name=[name].[ext]!./favicon.ico'\nimport '!file-loader?name=[name].[ext]!./quilt-og.png'\n// Import CSS reset and Global Styles\nimport WithGlobalStyles from './global-styles'\n\n// listen for Roboto fonts\nfontLoader('Roboto', 'Roboto Mono').then(() => {\n  // reload doc when we have all custom fonts\n  document.body.classList.add('fontLoaded')\n})\n\ninterface ErrorBoundaryPlaceholderProps {\n  error: Error\n  info: any\n  reset: () => void\n}\n\nfunction ErrorBoundaryPlaceholder({ error, info, reset }: ErrorBoundaryPlaceholderProps) {\n  const location = useLocation()\n  const errorShown = React.useRef(false)\n  React.useEffect(() => {\n    if (!errorShown.current) {\n      errorShown.current = true\n      return\n    }\n    errorShown.current = false\n    reset()\n  }, [location.pathname, reset])\n\n  const sentry = Sentry.use()\n  React.useEffect(() => {\n    sentry('captureException', error, info)\n  }, [error, info, sentry])\n\n  return (\n    <Layout bare>\n      <Error headline=\"Unexpected Error\" detail=\"Something went wrong\" />\n    </Layout>\n  )\n}\n\nconst ErrorBoundary = createBoundary(\n  (_: unknown, { reset }: { reset: () => void }) =>\n    (error: $TSFixMe, info: $TSFixMe) =>\n      <ErrorBoundaryPlaceholder error={error} info={info} reset={reset} />,\n)\n\n// error gets automatically logged to the console, so no need to do it explicitly\nconst FinalBoundary = createBoundary(() => (/* error, info */) => (\n  <h1\n    style={{\n      alignItems: 'center',\n      color: '#fff',\n      display: 'flex',\n      height: '90vh',\n      justifyContent: 'center',\n      maxHeight: '600px',\n    }}\n  >\n    Something went wrong\n  </h1>\n))\n\nconst history = createHistory()\nconst MOUNT_NODE = document.getElementById('app')\n\n// TODO: make storage injectable\nconst storage = mkStorage({ user: 'USER', tokens: 'TOKENS' })\n\nconst intercomUserSelector = (state: $TSFixMe) => {\n  const { user: u } = Auth.selectors.domain(state)\n  return (\n    u && {\n      user_id: u.current_user,\n      name: u.current_user,\n      email: u.email,\n    }\n  )\n}\n\nconst sentryUserSelector = (state: $TSFixMe) => {\n  const { user: u } = Auth.selectors.domain(state)\n  return u ? { username: u.current_user, email: u.email } : {}\n}\n\nconst render = () => {\n  ReactDOM.render(\n    nest(\n      [M.MuiThemeProvider as React.ComponentType, { theme: style.appTheme }],\n      WithGlobalStyles,\n      FinalBoundary,\n      // @ts-expect-error\n      Sentry.Provider,\n      [Store.Provider, { history }],\n      [NamedRoutes.Provider, { routes }],\n      [RouterProvider, { history }],\n      Cache.Provider,\n      [Config.Provider, { path: '/config.json' }],\n      [React.Suspense, { fallback: <Placeholder /> }],\n      [Sentry.Loader, { userSelector: sentryUserSelector }],\n      GraphQLProvider,\n      ErrorBoundary,\n      Notifications.Provider,\n      [APIConnector.Provider, { fetch, middleware: [Auth.apiMiddleware] }],\n      [Auth.Provider, { checkOn: LOCATION_CHANGE, storage }],\n      [\n        Intercom.Provider,\n        {\n          userSelector: intercomUserSelector,\n          horizontal_padding:\n            // align the launcher with the right side of the container\n            (window.innerWidth - Math.min(1280, window.innerWidth)) / 2 + 32,\n          vertical_padding: 59,\n        },\n      ],\n      ExperimentsProvider,\n      [\n        Tracking.Provider,\n        {\n          locationSelector: selectLocation,\n          userSelector: Auth.selectors.username,\n        },\n      ],\n      AWS.Credentials.Provider,\n      AWS.Config.Provider,\n      AWS.Athena.Provider,\n      AWS.S3.Provider,\n      Notifications.WithNotifications,\n      ErrorBoundary,\n      BucketCacheProvider,\n      App,\n    ),\n    MOUNT_NODE,\n  )\n}\n\n/*\nif (module.hot) {\n  // Hot reloadable React components and translation json files\n  // modules.hot.accept does not accept dynamic dependencies,\n  // have to be constants at compile-time\n  module.hot.accept(['./i18n', 'containers/App'], () => {\n    ReactDOM.unmountComponentAtNode(MOUNT_NODE);\n    render(translationMessages);\n  });\n}\n*/\n\nrender()\n","import FontFaceObserver from 'fontfaceobserver'\n\n/**\n * Load the fonts.\n *\n * @param fonts - Font-faces to load.\n *\n * @returns A promise resolved when all the fonts are loaded.\n */\nexport default (...fonts: string[]) =>\n  Promise.all(fonts.map((f) => new FontFaceObserver(f, {}).load()))\n","import * as R from 'ramda'\nimport * as React from 'react'\n\n// map of experiment name to array of variants\nconst EXPERIMENTS = {\n  cta: [\n    'Ready to get your data organized?',\n    'Ready to experiment faster?',\n    'Ready to maximize return on data?',\n  ],\n  lede: ['Accelerate from data to impact', 'Manage data like code', 'Discover faster'],\n}\n\nconst Ctx = React.createContext()\n\nconst pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)]\n\nconst mapKeys = (fn) =>\n  R.pipe(\n    R.toPairs,\n    R.map(([k, v]) => [fn(k, v), v]),\n    R.fromPairs,\n  )\n\nexport function ExperimentsProvider({ children }) {\n  const ref = React.useRef({})\n\n  const get = React.useCallback(\n    (name) => {\n      if (!(name in ref.current)) {\n        ref.current[name] = pickRandom(EXPERIMENTS[name])\n      }\n      return ref.current[name]\n    },\n    [ref],\n  )\n\n  const getSelectedVariants = React.useCallback(\n    (prefix = '') => mapKeys((k) => `${prefix}${k}`)(ref.current),\n    [ref],\n  )\n\n  return <Ctx.Provider value={{ get, getSelectedVariants }}>{children}</Ctx.Provider>\n}\n\nexport function useExperiments(experiment) {\n  const exps = React.useContext(Ctx)\n  return experiment ? exps.get(experiment) : exps\n}\n\nexport { ExperimentsProvider as Provider, useExperiments as use }\n","/* storage - abstract persistence; currently uses\n * enforce write/read from predefined keys only */\nimport invariant from 'invariant'\nimport mapValues from 'lodash/mapValues'\n\nexport default (keys) => {\n  const assertKey = (key, scope) =>\n    invariant(key in keys, `storage.${scope}: unexpected key: ${key}`)\n\n  function get(key) {\n    assertKey(key, 'get')\n    return JSON.parse(localStorage.getItem(keys[key]))\n  }\n\n  function set(key, value) {\n    assertKey(key, 'set')\n    return localStorage.setItem(keys[key], JSON.stringify(value))\n  }\n\n  function remove(key) {\n    assertKey(key, 'remove')\n    return localStorage.removeItem(keys[key])\n  }\n\n  function load() {\n    // user privacy may cause reads from localStorage to fail and throw\n    try {\n      return mapValues(keys, (_v, k) => get(k))\n    } catch (err) {\n      console.error('storage.load:', err) // eslint-disable-line no-console\n      // let reducers determine state\n      return undefined\n    }\n  }\n\n  return {\n    get,\n    set,\n    remove,\n    load,\n  }\n}\n","import * as R from 'ramda'\nimport * as React from 'react'\nimport * as redux from 'react-redux'\n\nimport { useExperiments } from 'components/Experiments'\nimport * as Config from 'utils/Config'\nimport usePrevious from 'utils/usePrevious'\n\nconst NAV_TIMEOUT = 500\n\nconst Ctx = React.createContext()\n\nconst loadMixpanel = (token) =>\n  import('mixpanel-browser').then(({ default: mp }) => {\n    mp.init(token)\n    return mp\n  })\n\nconst consoleTracker = Promise.resolve({\n  // eslint-disable-next-line no-console\n  track: (evt, opts) => console.log(`track: ${evt}`, opts),\n})\n\nconst mkLocation = (l) => `${l.pathname}${l.search}${l.hash}`\n\nconst delayNav = (e) => {\n  const el = e.currentTarget\n  if (e.which === 2 || e.metaKey || e.ctrlKey || el.target === '_blank') return () => {}\n  e.preventDefault()\n  return () => {\n    window.location = el.href\n  }\n}\n\nconst withTimeout = (p, timeout) =>\n  new Promise((resolve, reject) => {\n    let settled = false\n    const settle = (fn, a1) => (a2) => {\n      if (settled) return\n      settled = true\n      fn(a1 != null ? a1 : a2)\n    }\n    setTimeout(settle(reject, new Error('Timed out')), timeout)\n    p.then(settle(resolve), settle(reject))\n  })\n\nexport function TrackingProvider({ locationSelector, userSelector, children }) {\n  const { getSelectedVariants } = useExperiments()\n  const cfg = Config.useConfig()\n  // workaround to avoid changing client configs\n  const token = cfg.mixpanelToken || cfg.mixPanelToken\n\n  const tracker = React.useMemo(\n    () => (token ? loadMixpanel(token) : consoleTracker),\n    [token],\n  )\n\n  const location = mkLocation(redux.useSelector(locationSelector))\n  const user = redux.useSelector(userSelector)\n\n  const commonOpts = React.useMemo(\n    () => ({\n      // use same distinct_id as registry for event attribution\n      // else undefined to let mixpanel decide\n      distinct_id: user || undefined,\n      origin: window.location.origin,\n      location,\n      user,\n    }),\n    [location, user],\n  )\n\n  const track = React.useCallback(\n    (evt, opts) =>\n      tracker.then(\n        (inst) =>\n          new Promise((resolve) =>\n            inst.track(\n              evt,\n              { ...commonOpts, ...getSelectedVariants('experiment:'), ...opts },\n              resolve,\n            ),\n          ),\n      ),\n    [tracker, commonOpts, getSelectedVariants],\n  )\n\n  const trackLink = React.useCallback(\n    (evt, opts) => (e) => {\n      const delayedNav = delayNav(e)\n      withTimeout(track(evt, opts), NAV_TIMEOUT).then(delayedNav, delayedNav)\n    },\n    [track],\n  )\n\n  const instance = React.useMemo(() => ({ track, trackLink }), [track, trackLink])\n\n  usePrevious({ location, user }, (prev) => {\n    if (!R.equals({ location, user }, prev)) {\n      track('WEB', { type: 'navigation' })\n    }\n  })\n\n  return <Ctx.Provider value={instance}>{children}</Ctx.Provider>\n}\n\nexport function useTracker() {\n  return React.useContext(Ctx)\n}\n\nexport { TrackingProvider as Provider, useTracker as use }\n"],"names":["url","loc","window","location","Working","requireAdmin","Placeholder","color","authorizedSelector","isAdmin","Activate","token","registryUrl","Config","urls","NamedRoutes","activate","LegacyPackages","l","legacyPackagesRedirect","legacyPackages","Admin","AuthActivationError","AuthCode","AuthPassChange","AuthPassReset","AuthSignIn","AuthSignOut","AuthSignUp","AuthSSOSignUp","Bucket","Search","UriResolver","Landing","OpenLanding","OpenProfile","Install","MAbout","MPersonas","MProduct","BioIT","App","path","cfg","protect","alwaysRequiresAuth","paths","Home","mode","id","pathname","search","hash","home","component","exact","install","disableNavigator","about","enableMarketingPages","personas","product","signIn","to","signOut","passwordAuth","ssoAuth","signUp","ssoSignUp","passReset","passChange","code","activationError","profile","admin","uriResolver","bucketRoot","q","example","next","link","provider","buckets","p","retry","uri","encodeURIComponent","bucket","bucketOverview","bucketSearch","bucketFile","version","bucketDir","prefix","undefined","bucketPackageList","filter","sort","bucketPackageDetail","name","bucketPackageTree","revision","bucketPackageRevisions","bucketQueries","bucketESQueries","bucketAthenaQueries","bucketAthenaQueryExecution","queryExecutionId","root","adminUsers","adminBuckets","adminSettings","storyBook","ErrorBoundaryPlaceholder","error","info","reset","errorShown","current","sentry","Sentry","Layout","bare","Error","headline","detail","Promise","all","fonts","map","f","load","fontLoader","then","document","body","classList","add","_","FinalBoundary","style","alignItems","display","height","justifyContent","maxHeight","MOUNT_NODE","getElementById","user","tokens","intercomUserSelector","state","u","Auth","user_id","current_user","email","sentryUserSelector","username","theme","Store","history","routes","fallback","userSelector","GraphQL","Notifications","APIConnector","fetch","middleware","checkOn","storage","Intercom","horizontal_padding","innerWidth","Math","min","vertical_padding","Experiments","locationSelector","AWS","S3","Provider","BucketCache","EXPERIMENTS","cta","lede","Ctx","ExperimentsProvider","children","ref","get","arr","floor","random","length","getSelectedVariants","fn","k","v","value","useExperiments","experiment","exps","keys","assertKey","key","scope","JSON","parse","localStorage","getItem","set","setItem","stringify","remove","removeItem","_v","err","console","consoleTracker","resolve","track","evt","opts","log","TrackingProvider","mixpanelToken","mixPanelToken","tracker","mp","init","loadMixpanel","commonOpts","distinct_id","origin","inst","trackLink","e","timeout","delayedNav","el","currentTarget","which","metaKey","ctrlKey","target","preventDefault","href","delayNav","reject","settled","settle","a1","a2","setTimeout","instance","prev","type","useTracker"],"sourceRoot":""}