{"version":3,"file":"db80a69b.js","mappings":";;;;;;;;;;;AAuBA","sources":["webpack://home-assistant-frontend/./src/panels/config/integrations/integration-panels/zwave/zwave-log-dialog.js"],"sourcesContent":["import { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../../../../mixins/events-mixin\";\nimport \"../../../../../styles/polymer-ha-style-dialog\";\nimport \"../../../../../components/ha-dialog\";\n\nclass ZwaveLogDialog extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"ha-style-dialog\">\n      pre {\n        font-family: var(--code-font-family, monospace);\n      }\n    </style>\n      <ha-dialog open=\"[[_opened]]\" heading=\"OpenZwave internal logfile\" on-closed=\"closeDialog\">\n        <div>\n          <pre>[[_ozwLog]]</pre>\n        <div>\n      </ha-dialog>\n      `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _ozwLog: String,\n\n      _dialogClosedCallback: Function,\n\n      _opened: {\n        type: Boolean,\n        value: false,\n      },\n\n      _intervalId: String,\n\n      _numLogLines: {\n        type: Number,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"iron-overlay-closed\", (ev) =>\n      this._dialogClosed(ev)\n    );\n  }\n\n  showDialog({ _ozwLog, hass, _tail, _numLogLines, dialogClosedCallback }) {\n    this.hass = hass;\n    this._ozwLog = _ozwLog;\n    this._opened = true;\n    this._dialogClosedCallback = dialogClosedCallback;\n    this._numLogLines = _numLogLines;\n    if (_tail) {\n      this.setProperties({\n        _intervalId: setInterval(() => {\n          this._refreshLog();\n        }, 1500),\n      });\n    }\n  }\n\n  closeDialog() {\n    clearInterval(this._intervalId);\n    this._opened = false;\n    const closedEvent = true;\n    this._dialogClosedCallback({ closedEvent });\n    this._dialogClosedCallback = null;\n  }\n\n  async _refreshLog() {\n    const info = await this.hass.callApi(\n      \"GET\",\n      \"zwave/ozwlog?lines=\" + this._numLogLines\n    );\n    this.setProperties({ _ozwLog: info });\n  }\n}\n\ncustomElements.define(\"zwave-log-dialog\", ZwaveLogDialog);\n"],"names":[],"sourceRoot":""}